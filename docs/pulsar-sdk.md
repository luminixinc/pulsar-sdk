# üìò Pulsar Module Documentation

## Introduction
The `Pulsar` JavaScript module provides a high-level, promise-based API for interacting with **Salesforce data and platform services** from within custom apps running inside the **Pulsar for Salesforce environment**.

This module acts as a wrapper around the Pulsar JSAPI bridge, enabling reliable access to Salesforce SObjects, files, layouts, schemas, settings, and system-level capabilities. It is designed to abstract away initialization details and complexity when communicating with the Pulsar platform.

You should use this SDK to build custom forms, interactive record viewers, or application extensions that communicate with Salesforce data.

---

## Key Features
- ‚úÖ Asynchronous, auto-detected initialization for native & embedded contexts
- ‚úÖ Memory-safe event listener management
- ‚úÖ Promise-wrapped operations using Pulsar‚Äôs local JSAPI
- ‚úÖ Error handling for bridge state and API responses

---

## Public Method Categories

### Core Initialization
- `new Pulsar()` ‚Äì Create a new Pulsar instance.
- `init()` ‚Äì Initialize the bridge. Must be called before using any methods.

### Platform / Native Event Handling Methods
Use these methods when interacting with events that are generated by the Pulsar platform.
- `registerHandler(eventName, handler)` ‚Äì Register a callback for an event.
- `deregisterHandler(eventName, handler)` ‚Äì Remove a registered handler.

### SObject Data Operations
- `create(objectName, fields)` ‚Äì Create a Salesforce record.
- `read(objectName, id)` ‚Äì Read a record by Id.
- `update(objectName, id, fields)` ‚Äì Update fields on an existing record.
- `delete(objectName, id)` ‚Äì Delete a record.
- `select(objectName, whereClause)` ‚Äì Query records using a simplified filter.

### Sync Operations
- `syncData(objectName)` ‚Äì Trigger a local data sync for the given SObject.
- `interruptSync()` ‚Äì Cancel an in-progress sync.

### SObject Metadata and Layout
Use these methods to obtain information about displaying an individual SObject.
- `getLayout(objectName)` ‚Äì Get full layout metadata for an object.
- `getLayoutSections(objectName)` ‚Äì Get layout sections only.
- `getLayoutFields(objectName)` ‚Äì Get layout fields (used in layout sections).
- `getCompactLayoutFields(objectName)` ‚Äì Fields shown in compact view.
- `getSObjectSchema(objectName)` ‚Äì Get metadata for an SObject.
- `getPicklist(objectName, fieldName)` ‚Äì Get filtered picklist values.
- `getUnfilteredPicklist(objectName, fieldName)` ‚Äì Get all picklist values.

### Listviews
- `listviewInfo(objectName)` ‚Äì Get a map of listview labels indexed by their listviewId.
- `listviewMetadata(objectName, listviewId)` ‚Äì Get metadata for a specific listview. This includes information about how to display the listview and the field data associated with it.

### User and Platform Information
- `userInfo()` ‚Äì Get current user metadata.
- `userPhoto()` ‚Äì Get a URL to the user‚Äôs profile photo.
- `getPlatform()` ‚Äì Get current platform (e.g., iOS, Android, Web).
- `getDevServerEnabled()` ‚Äì Check if the dev server is enabled.
- `getLocation()` ‚Äì Retrieve current geolocation.
- `getPlatformFeatures()` - Get the features of the current platform (iOS, Windows, Android).

### Files and Attachments
- `createSFFile(parentId, fileName, base64Content, contentType)` ‚Äì Upload a file.
- `createSFFileFromFilePath(...)` ‚Äì Upload a file from a local path.
- `createSFFileFromCamera(...)` ‚Äì Take a photo and upload.
- `createSFFileBatch(...)` ‚Äì Upload multiple files.
- `readSFFile(fileId)` ‚Äì Download a file‚Äôs content.
- `deleteSFFile(fileId)` ‚Äì Delete a file by Id.
- `queryContent(objectName, parentId)` ‚Äì Query associated files.

### Chatter
- `chatterGetFeed(objectName, recordId)` ‚Äì Fetch a record‚Äôs Chatter feed.
- `chatterPostFeed(recordId, body)` ‚Äì Post to Chatter.

### UI and Navigation
- `showCreate(objectName, prefillFields)` ‚Äì Show native create screen.
- `viewObject(objectName, id)` ‚Äì Open the record viewer.
- `viewList(objectName, listViewId)` ‚Äì Show a list view.
- `viewRelated(parentObject, parentId, relatedListName)` ‚Äì Show a related list view.
- `lookupObject(objectName)` ‚Äì Prompt user to pick a record.
- `executeQuickAction(actionName, objectName, recordId)` ‚Äì Run a quick action.

### Utilities
- `mail(toAddress, subject, body)` ‚Äì Send an email.

### Settings
- `getSetting(settingKey)` ‚Äì Retrieve a stored setting value.
- `getSettingAttachment(settingKey)` ‚Äì Get a file stored as a setting.
- `getAutosyncStatus()` / `setAutosyncStatus()` ‚Äì Enable/disable automatic sync.
- `getOnlineStatus()` / `setOnlineStatus()` ‚Äì Read/write online status.

### Field Service
- `getFSLTemplate(templateId: string, templateName: string)` - Get service report templates.
- `executeFSLFlow(flowName, flowId, actionLabel, id, userId, parentId)` - Execute an FSL flow.
- `createServiceReportFromFilePath(parentId, filePath, templateId, documentName, contentType)` - Create a service report object from a path to a corresponding PDF file.

### Utilities
- `logMessage(message)` ‚Äì Log to Pulsar developer console.
- `setLeavePageMessage(msg)` ‚Äì Set a browser-style ‚ÄúLeave page‚Äù message.
- `exit()` ‚Äì Programmatically exit the app.
- `scanBarcode()` ‚Äì Launch barcode scanner.
- `displayUrl(url)` ‚Äì Open a URL in the platform browser.
- `getNetworkStatus()` ‚Äì Check current network condition.
- `resolveSOQLFieldPath(objectName, path)` ‚Äì Resolve a SOQL-style path (e.g., `"Owner.Name"`).

---

## Use Cases

This module is designed for:
- Building interactive Salesforce data apps inside the Pulsar platform
- Generating UI based on layout metadata (mimicking Salesforce behavior) for displaying SObjects
- Generating UI based on listview metadata (mimicking Salesforce behavior) for displaying lists of SObjects
- Creating AI-assisted tools that manipulate Salesforce data via Pulsar
- Automating file uploads and Chatter integrations

---

## Constructor

### `new Pulsar()`

Creates a new `Pulsar` SDK instance. This constructor is **safe to call immediately** when your app starts loading, even before the Pulsar JS bridge is ready.

> ‚ö†Ô∏è **Note:** Calling `new Pulsar()` **does not initialize** the communication bridge. You **must call** `await init()` before using any methods that rely on the bridge (e.g., `read`, `create`, `getLayout`, etc.).

The constructor sets up internal references and prepares the instance to listen for the `WebViewJavascriptBridgeReady` event, which signals that Pulsar‚Äôs native bridge is ready for use.

### Initialized Properties

| Property        | Type                | Description |
|----------------|---------------------|-------------|
| `pulsar`        | `object` or `null`  | Reference to `window.parent.pulsar` if embedded; `undefined` in native or preview modes |
| `bridge`        | `object` or `null`  | Bridge object used to communicate with the Pulsar JSAPI. Populated after `init()` resolves. |
| `isInitialized` | `boolean`           | `true` if the bridge was successfully initialized via `init()` |

### Usage Example

```js
import { Pulsar } from './pulsar.js';

const pulsar = new Pulsar();

// Always call init() before using Pulsar methods that require bridge access
await pulsar.init();

// Now safe to call other methods like:
const user = await pulsar.userInfo();
console.log(user.FullName);
```
---

## Method: `init()`

### `async init(): Promise<Pulsar>`

Initializes the Pulsar JS bridge by detecting whether the code is running in an **embedded web view** or a **native Pulsar environment**, and connects to the appropriate `bridge` object.

> ‚ö†Ô∏è **IMPORTANT:** This method **must be called once** before using any Pulsar SDK methods that depend on the JS bridge (e.g., `read`, `create`, `getLayout`, etc.).

### Behavior
- In **embedded context** (e.g., running inside an iframe):
  - Retrieves `window.parent.pulsar.bridge`
  - Skips internal `bridge.init()` (already handled by parent container)

- In **native Pulsar context**:
  - Waits for the `WebViewJavascriptBridgeReady` event
  - Calls `bridge.init()` for legacy support on Pulsar versions <12

### Returns
- A `Promise` that resolves to the current `Pulsar` instance (`this`) once initialization is complete.
- The `bridge` and `pulsar` properties will be fully populated and ready for use.

### Rejects If

- `init()` is called more than once (enforced via `isInitialized === true`)
- The bridge does not become available within 5 seconds (timeout)

### Important
You **must** call `init()` before using any other SDK methods, and it must be awaited or chained with `.then()` to avoid blocking the `WebViewJavascriptBridgeReady` event in native mode.

### Examples
Safely called from an `async` function.
``` js
async function main() {
  const pulsar = new Pulsar();
  await pulsar.init();
}
main();
```

Safely used in an anonymous async method (IIFE).
```js
(async () => {
  const pulsar = new Pulsar();
  await pulsar.init(); // Required before calling bridge methods

  const user = await pulsar.userInfo();
  console.log('User:', user.FullName);
})();
```

Safely used with a `.then()` statement.
``` js
const pulsar = new Pulsar();
pulsar.init().then(() => {
  console.log('Ready');
});
```

**DO NOT DO** (top-level await in some environments)
``` js
const pulsar = new Pulsar();
await pulsar.init(); // ‚ùå May block event listener registration
```
---

## Method: `registerHandler()`

### `registerHandler(handlerName: string, handlerFn: function): void`
Registers an event listener for Pulsar JSAPI bridge events or embedded sync lifecycle events. This method abstracts the differences between native and embedded contexts and ensures safe usage of event handlers that might otherwise interfere with the parent bridge (e.g., in FSL).

This is especially useful for listening to sync progress and custom Pulsar events like `invalidateLayout`, `dispatchToHomeApp`, or `syncDataFinished`.

| Parameter	| Type | Required |	Description |
|-----------|------|----------|-------------|
| handlerName |	string | ‚úÖ | The name of the event to listen for (e.g., `"syncDataFinished"`, `"invalidateLayout"`) |
| handlerFn |	function | ‚úÖ | A function to be called when the event occurs. The handler may receive a data payload depending on the event.|

### Behavior
- In embedded contexts, sync-related events (`syncDataUpdate`, `syncDataFinished`) are registered using this.`pulsar.addSyncDataUpdateHandler()` or `addSyncFinishedHandler()` to avoid interfering with the parent bridge.
- In native contexts, or for non-sync events, `this.bridge.registerHandler()` is used directly.
- A warning is emitted if an unsupported sync event is used in embedded mode (e.g., `syncDataStarted`) to prevent unexpected side effects.

### Supported Events
| Event Name | Description |
|------------|-------------|
| syncDataUpdate | Called periodically during sync. Use to update loading/progress UI |
| syncDataFinished | Called when the full sync (data + assets) completes |
| invalidateLayout | Called when layout schema changes ‚Äî re-fetch with getLayout() |
| dispatchToHomeApp |	Custom app event routing ‚Äî see Pulsar docs |
| custom_oauth | Pulsar 12+ only ‚Äî fired after custom OAuth flow |

> ‚ö†Ô∏è In embedded contexts, only syncDataUpdate and syncDataFinished are safely supported. Other sync handlers will emit a warning.

### Example
``` js
await pulsar.init();

// Register a handler that shows a sync completion message
pulsar.registerHandler('syncDataFinished', (result) => {
  console.log('Data sync completed:', result);
});

// Register for layout invalidation (native or embedded-safe)
pulsar.registerHandler('invalidateLayout', () => {
  console.log('Layout changed ‚Äî refetching...');
});
```
---

## Method: `deregisterHandler()`

### `deregisterHandler(handlerName: string): void`
Removes an event listener previously registered via `registerHandler()`. In embedded contexts, this method intelligently deregisters embedded-safe sync handlers without interfering with the parent bridge.

### Parameters
| Parameter	| Type | Required | Description |
|-----------|------|----------|-------------|
| `handlerName` |	`string` | ‚úÖ | The name of the event handler to remove |

### Behavior
- If the handler is one of the embedded sync events (`syncDataUpdate`, `syncDataFinished`), it is deregistered using `this.pulsar.removeSyncDataUpdateHandler()` or `removeSyncFinishedHandler()`.
- In all other cases, `this.bridge.deregisterHandler()` is used directly.
- In embedded mode, this prevents accidental removal of parent bridge handlers that may have been defined upstream.

### Example
``` js
await pulsar.init();

// Remove a sync completion handler
pulsar.deregisterHandler('syncDataFinished');

// Remove a bridge-level event like layout invalidation
pulsar.deregisterHandler('invalidateLayout');
```

### Notes
Always call `init()` before registering or deregistering handlers.

In embedded environments (e.g., FSL), avoid calling `deregisterHandler` for `syncDataStarted`, syncDataFinished, or other sync lifecycle events unless specifically supported.

For non-sync events (like UI or layout changes), the native bridge is safe in all contexts.
---

## Method: `create()`

### `async create(objectName: string, fields?: object, args?: object): Promise<string>`
Creates a new record for the specified Salesforce SObject using the Pulsar JSAPI. This wraps the `"create"` type request in a Promise and allows optional behavior configuration via `args`. The returned promise resolves to the `Id` of the object that was created.

### Parameters
| Parameter    | Type     | Required | Description |
|--------------|----------|----------|-------------|
| `objectName` | `string` | ‚úÖ       | The API name of the SObject to create (e.g., `"Contact"`, `"WorkOrder"`) |
| `fields`     | `object` | ‚úÖ       | A key-value map of fields and values for the new record |
| `args`       | `object` | ‚ùå       | Optional arguments that control Pulsar's creation behavior (e.g., `"allowEditOnFailure"`, `"skipLayoutRequiredFieldCheck"`) |

### Returns
A `Promise<string>` that resolves to the newly created object's record Id. In order to get access to the complete object, a `read` is necessary.

### Example
```js
await pulsar.init();

const newContactId = await pulsar.create('Contact', {
  FirstName: 'Suki',
  LastName: 'Tanaka',
  Email: 'suki@example.com'
}, {
  allowEditOnFailure: 'FALSE'
});

console.log('Created contact id:', newContactId);
```

### Success Response
```json
"003ABC0000001XYZ"
```

### Notes
- Default behavior allows Pulsar to show a fallback record creation screen if field validation fails.
- To fully suppress the UI and treat errors as hard failures, pass `{ allowEditOnFailure: 'FALSE' }`.
- If any required layout fields are omitted, use `{ skipLayoutRequiredFieldCheck: 'TRUE' }` to override.
---

## Method: `read()`

### `async read(objectName: string, filters?: object): Promise<object[]>`
Performs a **read** operation against the Pulsar local database using the Pulsar JSAPI. This function is used to retrieve records for a specific Salesforce SObject that match given criteria. Values from the returned base record can be retrieved by accessing them by their field names. All values returned as strings.

### Parameters
| Parameter    | Type     | Required | Description |
|--------------|----------|----------|-------------|
| `objectName` | `string` | ‚úÖ       | The API name of the SObject to query (e.g., `"Account"`, `"Contact"`) |
| `filters`    | `object` | ‚ùå       | Optional field-value pairs used to filter results. Matching is **exact** and **case-sensitive**. Defaults to an empty object `{}`. |

### Returns
A `Promise` that resolves to an array of matched records. If no matches are found, the array will be empty. All fields of each matching record are returned (field selection is not currently supported).

### Example
```js
await pulsar.init();

const accounts = await pulsar.read('Account', {
  Industry: 'Technology',
  BillingCountry: 'USA'
});

console.log(accounts);

const industry = accounts[0]['Industry'];
console.log('Industry: ', industry);
```

### Success Response
```json
[
  {
    "Id": "001ABC0000001DEF",
    "Name": "Tech Innovators Inc.",
    "Industry": "Technology",
    "BillingCountry": "USA",
    // ... additional fields
  }
]
```

### Notes
- Filters operate as strict field matches; regex or partial matches are **not supported**.
- This method accesses the **local offline cache** used by Pulsar. Syncing might be required to ensure freshness.
- Ideal for use in FSL screens or embedded HTML components that rely on dynamic SObject data.
---


## Method: `update()`

### `async update(objectName: string, fields: object): Promise<string>`

Updates a single record for the specified Salesforce SObject using the Pulsar JSAPI. The record must include the `Id` field to identify which record to update.

### Parameters
| Parameter    | Type     | Required | Description |
|--------------|----------|----------|-------------|
| `objectName` | `string` | ‚úÖ       | The API name of the SObject to update (e.g., `"Account"`, `"WorkOrder"`) |
| `fields`     | `object` | ‚úÖ       | A key-value map of fields to update ‚Äî must include `Id` |

### Returns
A `Promise<string>` that resolves to the updated object record Id. To obtain the complete object, you must use a `read` call.

### Example
```js
await pulsar.init();

const updatedAccountId = await pulsar.update('Account', {
  Id: '001ABC0000001XYZ',
  Name: 'Updated Account Name',
  Industry: 'Energy'
});

console.log('Updated account Id:', updatedAccountId);
```

### Success Response
```json
"001ABC0000001XYZ"
```

### Notes
- Only one record may be updated at a time ‚Äî batch updates are not supported.
- The object must be synced to the local Pulsar database to be updated.
- You can update any editable field defined in the SObject schema, subject to field-level security and layout rules.
---

## Method: `delete()`

### `async delete(objectName: string, id: string): Promise<string>`
Deletes a single record from the local Pulsar database using the Pulsar JSAPI. This wraps the `"delete"` type request and targets one SObject record by its Salesforce `Id`.

### Parameters

| Parameter    | Type     | Required | Description |
|--------------|----------|----------|-------------|
| `objectName` | `string` | ‚úÖ       | The API name of the SObject to delete (e.g., `"Contact"`, `"WorkOrder"`) |
| `id`         | `string` | ‚úÖ       | The Salesforce `Id` of the record to delete |

### Returns
A `Promise<string>` that resolves to the string Id of the deleted object if successful and an error otherwise.

### Example
```js
await pulsar.init();

const result = await pulsar.delete('Contact', '003ABC0000001XYZ');

console.log('Delete result:', result);
```

### Success Response
```json
"003ABC0000001XYZ"
```

### Notes
- Only **one record** may be deleted per call.
- This affects only the **local** Pulsar cache ‚Äî deletion will sync back to Salesforce if supported by the sync configuration.
- Some records may be restricted from deletion due to parent-child relationships or validation rules.
---

## Method: `select()`

### `async select(objectName: string, query: string): Promise<object[]>`
Executes a local SQL-like `SELECT` query against Pulsar‚Äôs local database. This is useful for advanced filtering, partial matching (e.g., `LIKE`), or more complex queries that aren't possible with the `read()` method. All values are returned as strings.

Unlike `read()`, this method accepts raw SQL-style query strings and returns all matching records from Pulsar‚Äôs local data cache.

### Parameters
| Parameter |	Type | Required |	Description |
|-----------|------|----------|-------------|
| objectName | string |	‚úÖ	| The API name of the SObject to query (e.g., `"Account"`, `"Contact"`) |
| query | string | ‚úÖ | A raw SQL-style query string to execute (e.g., `"SELECT Id FROM Account WHERE Name LIKE '%test%'"`) |

### Returns
A `Promise<object[]>` that resolves to an array of records matching the query. The query is evaluated against Pulsar‚Äôs local data store and will return only locally available records.

### Example
``` js
await pulsar.init();

const accounts = await pulsar.select('Account', "SELECT Id, Name FROM Account WHERE Name LIKE '%test%'");

console.log(accounts.length);           // number of matched records
console.log(accounts[0].Name);          // name of the first match
```

### Success Response
``` json
[
  { "Id": "001ABC0000001XYZ", "Name": "Test Account" },
  { "Id": "001ABC0000002XYZ", "Name": "Another Test Account" }
]
```

### Notes
- This method is read-only. To modify data `updateQuery()`.
- Can be useful in search bars, advanced filters, or data tables.
---

## Method: `getLayout()`
### async `getLayout(objectName: string, recordTypeId?: string, recordTypeName?: string): Promise<DescribeLayout>`
Retrieves full layout metadata for a Salesforce SObject, including field names and positions, sections, and record type variations. This `DescribeLayout` object corresponds with the `describeLayoutResponse` as defined by Salesforce. This is a critical method for determining how and what data to display for an object and its various related lists.

### Common Uses
Use this method to display detailed record layouts and related lists as defined by Salesforce‚Äôs UI metadata. It includes visibility and layout rules for fields, as well as related list configurations.

### Parameters
| Parameter        | Type   | Description                                                                                                |
| ---------------- | ------ | ---------------------------------------------------------------------------------------------------------- |
| `objectName`     | string | The Salesforce SObject API name (e.g., `"Account"`, `"WorkOrder"`)                                         |
| `recordTypeId`   | string | *(Optional, preferred)* The Id of the Record Type used to determine the layout                             |
| `recordTypeName` | string | *(Optional)* Developer Name of the Record Type ‚Äî takes precedence over `recordTypeId` if both are provided |
> ‚ö†Ô∏è Note: **You must supply at least one of recordTypeId or recordTypeName**. If both are provided, `recordTypeName` takes precedence.

### Returns
A `Promise<DescribeLayout>` ‚Äî A resolved layout metadata object. Automatically parses JSON strings for compatibility with Pulsar 11.x.

### Example
Get the full layout for the `Account` object with a specific record type ID:
``` js
await pulsar.init();
const layout = await pulsar.getLayout('Account', '0123ABC000001abc');

console.log(layout);
```
Or, using the record type name instead:
``` js
const layout = await pulsar.getLayout('Account', undefined, 'Business_Account');
```
---

## Method: `getLayoutSections()`

### `async getLayoutSections(objectName: string, recordTypeId?: string, recordTypeName?: string, layoutMode?: string): Promise<GetLayoutSectionResult[]>`
Retrieves layout section metadata for a given Salesforce object. This is useful when you only need high-level structure (e.g., section headings) for display or edit modes.

This method is a lightweight alternative to getLayout, returning only the layout sections instead of the full layout metadata.

### Parameters
| Parameter        | Type     | Required | Description                                                              |
| ---------------- | -------- | -------- | ------------------------------------------------------------------------ |
| `objectName`     | `string` | ‚úÖ        | The API name of the Salesforce SObject (e.g., `"Account"`).              |
| `recordTypeId`   | `string` | ‚ùå        | Salesforce Record Type Id. Ignored if `recordTypeName` is also provided. |
| `recordTypeName` | `string` | ‚ùå        | Developer name of the Record Type. Takes precedence over `recordTypeId`. |
| `layoutMode`     | `string` | ‚ùå        | Layout mode to retrieve: `"display"` (default) or `"edit"`.              |

### Returns
A `Promise<GetLayoutSectionResult[]>` that resolves to an array of layout section metadata, where each entry includes:
| Field     | Type     | Description                              |
| --------- | -------- | ---------------------------------------- |
| `heading` | `string` | The visible label of the section         |
| `display` | `string` | `"TRUE"` if the section is shown         |
| `section` | `string` | Order index of the section (as a string) |

### Example
Get sections by record type name.
``` js
const sections = await pulsar.getLayoutSections('Account', null, 'Business_Account', 'edit');
```
---

## Method: `getLayoutFields()`

### `async getLayoutFields(objectName: string, recordTypeId?: string, recordTypeName?: string, layoutMode?: string): Promise<GetLayoutFieldResult[]>`
Retrieves a flattened list of field metadata from the layout for a given Salesforce object. This includes field labels, editable status, and visibility for either display or edit mode.

Use this method to dynamically render forms or inspect layout structure programmatically.

### Parameters
| Parameter        | Type     | Required | Description                                                                          |
| ---------------- | -------- | -------- | ------------------------------------------------------------------------------------ |
| `objectName`     | `string` | ‚úÖ        | API name of the Salesforce SObject (e.g., `"Contact"`).                              |
| `recordTypeId`   | `string` | ‚ùå        | Record Type Id to use for layout filtering. Ignored if `recordTypeName` is provided. |
| `recordTypeName` | `string` | ‚ùå        | Developer Name of the Record Type. Takes precedence over `recordTypeId`.             |
| `layoutMode`     | `string` | ‚ùå        | Layout mode to retrieve: `"display"` (default) or `"edit"`.                          |

### Returns
A `Promise<GetLayoutFieldResult[]>` resolving to an array of layout field metadata entries, where each entry includes:
| Field               | Type     | Description                                      |
| ------------------- | -------- | ------------------------------------------------ |
| `name`              | `string` | Field API name                                   |
| `label`             | `string` | Display label for the field                      |
| `editableForUpdate` | `string` | `"TRUE"` or `"FALSE"` for update editability     |
| `editableForNew`    | `string` | `"TRUE"` or `"FALSE"` for new record editability |
| `type`              | `string` | `"Field"` or related type                        |
| `required`          | `string` | `"TRUE"` if the field is required                |


### Example
``` js
const fields = await pulsar.getLayoutFields(
  'Contact',
  '012xx0000001234AAA', // recordTypeId
  undefined,            // recordTypeName
  'edit'                // layoutMode
);
```
Or using recordTypeName (takes precedence):
``` js
const fields = await pulsar.getLayoutFields(
  'Contact',
  '012xx0000001234AAA', // recordTypeId (ignored)
  'Support',            // recordTypeName
  'edit'
);
```
---

## Method: `getCompactLayoutFields`()
### `async getCompactLayoutFields(objectName: string, recordTypeId?: string, recordTypeName?: string): Promise<string[]>`
Retrieves the list of field API names defined in the Compact Layout of a Salesforce SObject. This is useful for displaying summary cards or mobile-friendly object overviews, as it reflects what users would see in standard Salesforce mobile UIs.

This method is similar to `getLayout()` but returns a simple array of field names in the compact layout rather than a full layout metadata object.

### Parameters
| Parameter        | Type     | Required | Description                                                                    |
| ---------------- | -------- | -------- | ------------------------------------------------------------------------------ |
| `objectName`     | `string` | ‚úÖ        | The API name of the SObject (e.g., `"Contact"`, `"Account"`).                  |
| `recordTypeId`   | `string` | ‚ùå        | The Salesforce Record Type Id to use. Ignored if `recordTypeName` is provided. |
| `recordTypeName` | `string` | ‚ùå        | The Developer Name of the Record Type. Takes precedence over `recordTypeId`.   |

### Returns
A `Promise<string[]>` ‚Äî resolves to an array of field API names configured for the Compact Layout.

### Example
Using optional `recordTypeName`.
``` js
await pulsar.init();

const fields = await pulsar.getCompactLayoutFields('Contact', undefined, 'Business_Contact');

console.log('Compact layout fields:', fields);
```

### Sample Output
``` json
[
  "Name",
  "Email",
  "Phone",
  "MobilePhone",
  "Title"
]
```

### Notes
- Compact Layouts are ideal for building mobile cards, summary tiles, or quick-glance overviews.
- If both `RecordTypeName` and `RecordTypeId` are provided, the RecordTypeName takes precedence.
- This method does not return layout positioning or UI sections ‚Äî only field names in order of appearance.
---

## Method: `getSObjectSchema()`

### `async getSObjectSchema(objectName: string): Promise<DescribeSObjectResult>`
Retrieves schema metadata for a specified Salesforce SObject. This is the most complete definition of a given object and includes fields, types, relationships, record type mappings, and other metadata. The returned structure conforms to the Salesforce DescribeSObjectResult.

### Parameters
| Parameter	| Type | Required	| Description |
------------|------|----------|-------------|
| `objectName` | `string`	| ‚úÖ	| The API name of the SObject (e.g., `"Account"`, `"Contact"`) |

### Returns
A `Promise<DescribeSObjectResult>` that resolves to a parsed DescribeSObjectResult JSON object.

### Example
```js
await pulsar.init();

const schema = await pulsar.getSObjectSchema('WorkOrder');
console.log(schema.fields.map(f => f.name));
```

### Success Response (sample)
``` json
{
  "fields": [
    { "name": "Id", "type": "id" },
    { "name": "Subject", "type": "string" },
    { "name": "Status", "type": "picklist" }
  ],
  "childRelationships": [],
  "recordTypeInfos": []
  // ... and more
}
```

### Notes
- Useful for dynamic form generation, validation, and metadata-aware tooling.
- Often paired with `getLayout()` for full UI metadata context.

---

## Method: `resolveSOQLFieldPath()`

### `async resolveSOQLFieldPath(record: object, path: string, sObjectType: string): Promise<string|null>`
Resolves a dot-notated SOQL-style field path (e.g., `"Contact.Account.Name"` or `"Owner.Manager.Name"`) against a base record, recursively traversing relationships using schema introspection and Pulsar reads.

This method is especially useful for resolving values in **RelatedListColumn.fieldApiName** fields retrieved from `pulsar.getLayout()`. This method is not necessary when retrieving a field from a base record. We only need to use it when getting the value from a SOQL-style field path.

### Parameters
| Parameter	| Type | Required |	Description |
|---------- | ---- | -------- | ----------- |
| `record` | `object` |	‚úÖ	| The base record object from a Pulsar `read()` result |
| `path` | `string` |	‚úÖ	| Dot-separated field path (e.g., `"Contact.Name"` or `"Owner.Manager.Name"`) |
| `sObjectType`	| `string` | ‚úÖ | The SObject API name of the base record (e.g., `"Contact"`) |

### Returns
A `Promise<string|null>` that resolves to the final field value at the end of the path, or `null` if any relationship or field fails to resolve.

### Behavior
If the path starts with the object type (e.g., `Contact.Name` from a `Contact` record), the type prefix is removed.

Each segment is inspected using the schema for the current object type to determine whether it is a **relationship name** or a **field**.

If a relationship segment is encountered, the method:
- Looks up the relationship field name using the `relationshipName` attribute.
- Resolves polymorphic relationships (multi-object references) using `__r.attributes.type`, if present.
- Falls back to the first object listed in `referenceTo` if type inference fails.
- Reads the referenced record from Pulsar using `pulsar.read()`.
- Continues traversal on the referenced record.

### Example
``` js
const contact = await pulsar.read('Contact', { Id: '003...' });
const accountName = await pulsar.resolveSOQLFieldPath(contact[0], 'Account.Name', 'Contact');
console.log(accountName); // e.g., "ACME Corp"
```

### Notes
- **Commonly used to display fields from related records in Related Lists.**
- Handles both direct and polymorphic relationship fields like `WhatId`, `WhoId`, `OwnerId`.
- If any segment is unresolved (e.g., due to missing relationship field, ID, or schema), returns `null`.
- Lookup resolution supports multi-object references by checking related record hints or falling back.
- Especially useful for displaying Related List columns accurately when using `pulsar.getLayout()`.

### Example
```js
const layout = await pulsar.getLayout("Account");
const contactList = layout.relatedLists.find(rl => rl.sobject === "Contact");
const contactFields = contactList.columns.map(col => col.fieldApiName);

// you can then resolve the values for these fields using resolveSOQLFieldPath
```

---

## Method: `syncData()`

### `async syncData(options?: object): Promise<void>`
Initiates a Pulsar sync operation. This call begins the background sync process and returns immediately ‚Äî it does not wait for the sync to complete. To receive progress updates or sync completion events, use `registerHandler()` before calling this method.

This is the programmatic equivalent of pressing the Sync Now button in the Pulsar UI.

### Parameters
| Parameter |	Type | Required	| Description |
|-----------|------|----------|-------------|
| `options`	| `object` | ‚ùå | Optional object specifying sync configuration (see below) |
| `options.singleObjectSyncEnabled` |	`boolean` |	‚ùå | Run a sync for a single root object |
| `options.rootObjectId` | `string` | ‚ùå | The Salesforce Id of the object to sync (when `singleObjectSyncEnabled` is `true`) |
| `options.parentIdFieldList` |	`string[]` | ‚ùå | Specific reference fields to include (e.g., ['AccountId']) or ['NONE'] |
| `options.childRelationshipList` |	`string[]` | ‚ùå | Child relationships to include (e.g., ['Cases']) or ['NONE'] |
| `options.pushChangesSyncEnabled` | `boolean` | ‚ùå | If `true`, only local changes will be pushed to Salesforce |
| `options.useComposite` | `boolean` | ‚ùå | Force use of Salesforce Composite API |
| `options.useCompositeGraph` |	`boolean` |	‚ùå | Force use of Composite Graph API |

‚ö†Ô∏è Only one of `singleObjectSyncEnabled` or `pushChangesSyncEnabled` should be set to `true`.

### Returns
A `Promise<void>` ‚Äî resolves once the sync request has been initiated, not when it completes.

Use `registerHandler('syncDataFinished', ...)` to handle post-sync logic.

### Example: Standard Sync
``` js
await pulsar.init();
pulsar.registerHandler('syncDataFinished', () => {
  console.log('Sync complete!');
});
await pulsar.syncData();
```

### Example: Push Changes Only Using Composite Graph
``` js
await pulsar.syncData({
  pushChangesSyncEnabled: true,
  useCompositeGraph: true
});
```

### Example: Single Object Sync
``` js
await pulsar.syncData({
  singleObjectSyncEnabled: true,
  rootObjectId: '003d0000032lc1ZAAQ',
  parentIdFieldList: ['AccountId'],
  childRelationshipList: ['Tasks']
});
```

### Notes
- The `syncData()` call returns immediately. Always use `registerHandler()` to listen for `syncDataFinished`.
- In embedded contexts (e.g., FSL), only one sync handler may be active at a time.
- Do not invoke another sync from within a sync handler ‚Äî this may cause loops.

---

## Method: `interruptSync()`

### `async interruptSync(): Promise<boolean>`
Attempts to **cancel an active sync** operation in Pulsar. This can be useful when a sync is taking too long or if the user navigates away from the syncing screen.

The method resolves immediately with a boolean indicating whether a sync was found and interrupted. This is safe to call even if no sync is active ‚Äî in that case, it simply returns `false`.

Returns
A `Promise<boolean>` ‚Äî resolves to:
- `true`: if an active sync was successfully interrupted.
- `false`: if no sync was running at the time of the request.

### Example
``` js
await pulsar.init();

const wasInterrupted = await pulsar.interruptSync();

if (wasInterrupted) {
  console.log('Sync was successfully interrupted.');
} else {
  console.log('No active sync to interrupt.');
}
```

### Notes
- If no sync is in progress, the request will be acknowledged with a success response but will return `false`.
- This does not cancel any local pending changes ‚Äî only halts the active sync lifecycle if it's in progress.
- Should be used sparingly and typically only in response to **user-initiated aborts** (e.g., cancel button, navigation away from sync-dependent UI).

---

## Method: `userInfo()`

### `async userInfo(): Promise<UserInfo>`
Retrieves information about the currently logged-in Salesforce user and the Pulsar runtime environment.

This method returns a comprehensive set of metadata describing the current user session, including locale, profile, org ID, and sync status. It also includes Pulsar-specific fields such as the last successful and failed sync timestamps, and user photo URLs (small and full).

This is useful for displaying user identity in apps, auditing activity, or tailoring UIs based on user profile or locale.

### Returns
A `Promise<UserInfo>` ‚Äî resolves to an object with the following fields:

| Field |	Type | Description |
|-------|------|-------------|
| `username` | `string` |	The Salesforce username (e.g., jane.doe@mycompany.com) |
| `userid` | `string`	| Salesforce user Id |
| `userfullname` | `string` | Full name of the user |
| `userlanguage` | `string` | User's Salesforce language (e.g., en_US) |
| `locale` | `string` | User's Salesforce locale |
| `userprofileid` |	`string` | Salesforce Profile ID |
| `userprofilename` | `string` | Profile label (if available) |
| `userroleid` | `string` | Salesforce Role ID |
| `userrolename` | `string` | Role label (if available) |
| `organizationid` | `string` | Salesforce Org ID |
| `sessionid` | `string` | Current Salesforce Session ID |
| `instanceurl` | `string` | Base Salesforce Instance URL |
| `lastsuccessfulsync` | `string` | Timestamp of last successful Pulsar sync |
| `lastfailedsync` | `string` | Timestamp of last failed Pulsar sync |
| `version` | `string` | Pulsar runtime version |
| `devicelanguage` | `string` | Device-reported language setting |
| `userSmallPhoto` | `string` | URL to the user's small photo thumbnail |
| `userFullPhoto` | `string` | URL to the user's full-size photo |

### Example
``` js
await pulsar.init();

const user = await pulsar.userInfo();

console.log('User:', user.userfullname);
console.log('Org ID:', user.organizationid);
console.log('Photo URL:', user.userSmallPhoto);
```

### Notes
- The method requires `await pulsar.init()` beforehand.
- Useful for branding, permissions checks, or displaying user metadata.
- Photo URLs may point to internal Pulsar-local endpoints or proxied Salesforce image sources.

---

## Method: `saveAs()`

### `async saveAs(options: object): Promise<string>`
Generates a PDF or image file from the current document, with optional headers, footers, margins, and print layout configuration. This method is ideal for exporting snapshots of app views or printable documents inside Pulsar-enabled apps.

### Parameters

| Parameter | Type | Required | Description |
|-----------|------|----------|-------------|
| `filename` | `string` | ‚úÖ | Output filename (e.g., `"report.pdf"`, `"capture.png"`) |
| `displayresult` | `number` | ‚ùå | Show the generated file immediately if > 0; otherwise save silently |
| `datauri` | `string` | ‚ùå | Base64-encoded `data:image/...` or `data:application/pdf` URI to save directly |
| `docnode` | `string` | ‚ùå | DOM reference to the document node to snapshot (e.g., `'window.document'`) |
| `headernode` | `string` | ‚ùå | DOM reference to an element for the document header |
| `footernode` | `string` | ‚ùå | DOM reference to an element for the document footer |
| `printoptions` | `object` | ‚ùå | Object specifying print margins, page size, and rendering options |

### `printoptions` Fields
| Field | Type | Description |
|-------|------|-------------|
| `topmargin` | `number` | Top margin in points (1 inch = 72 points) |
| `leftmargin` | `number` | Left margin in points |
| `bottommargin` | `number` | Bottom margin in points |
| `rightmargin` | `number` | Right margin in points |
| `papersize` | `string` | Page size (e.g., `'a4'`, `'letter'`) ‚Äî overrides top-level papersize if present |
| `headerheight` | `number` | Header height in points ‚Äî required if headernode is set |
| `footerheight` | `number` | Footer height in points ‚Äî required if footernode is set |
| `useEdge` | `boolean` | Use Chromium-based PDF engine (Windows 15.0+ only) for consistent layout rendering |

### Returns
`Promise<string>`: Resolves to the file path of the saved output.

### Example
``` js
await pulsar.saveAs({
  filename: 'summary.pdf',
  displayresult: 1,
  docnode: 'window.document',
  headernode: "document.getElementById('header')",
  footernode: "document.getElementById('footer')",
  printoptions: {
    topmargin: 28,
    leftmargin: 28,
    bottommargin: 28,
    rightmargin: 28,
    papersize: 'a4',
    headerheight: 88,
    footerheight: 40,
    useEdge: true
  }
});
```

### Notes
- If `datauri` is provided, a file is saved without capturing the screen.
- The `useEdge` flag is specific to Windows and aligns output behavior with Android.
- Headers/footers must define both DOM node and height to render correctly.
- Layout rendering is platform-sensitive; always test on target OS if formatting is critical.

---

## Method: `createSFFile()`

### `async createSFFile(parentId: string, name: string, body: string, options?: object): Promise<string>`

Creates a new Salesforce File (`ContentDocument`) from base64-encoded file data.
This allows creation of Salesforce Files directly from memory data instead of device files or camera capture.

You must supply a valid ParentId (the record to attach the file to), the filename, and the base64 file content.
You can also pass optional fields such as `ContentType`, `NetworkId`, or any custom fields.

On success, the method resolves to the newly created `ContentDocumentId`.

### Parameters
| Parameter           | Type     | Required | Description          |
| ------------------- | -------- | -------- | -------------------- |
| `parentId`          | `string` | ‚úÖ       | The Salesforce Id of the parent record to attach the file to (e.g., `Account.Id`, `WorkOrder.Id`). |
| `name`              | `string` | ‚úÖ       | The file name to assign to the uploaded file (e.g., `"Document.pdf"`). |
| `body`              | `string` | ‚úÖ       | Base64-encoded file content. |
| `options`           | `object` | ‚ùå       | Optional object containing additional fields: |
| `options.contentType` | `string` | ‚ùå     | MIME type of the file (e.g., `"application/pdf"`). |
| `options.networkId` | `string` | ‚ùå       | Salesforce Experience Cloud Network Id. |
| `options.*`         | `any`    | ‚ùå       | Any additional custom fields to include when creating the `ContentDocument`. |

### Returns
A `Promise<string>` that resolves to the new `ContentDocumentId` created.

### Example
```js
await pulsar.init();

const fileId = await pulsar.createSFFile('001abc012345678ABC', 'MyFile.pdf', base64Data, {
  contentType: 'application/pdf',
  networkId: '0DB123456789123',
  CustomField__c: 'My Value'
});

console.log('New Salesforce File Id:', fileId);
```

### Notes
- Custom fields must use their full Salesforce API names (e.g., `MyCustomField__c`).
- Only **one file can be created** at a time with this method.
- To create files from the device file system, use `createSFFileFromFilePath()` or `createSFFileFromFilePathBatch()`.
- To create files from the camera, use `createSFFileFromCamera()`.
- The `options` object allows you to pass both standard fields and any additional custom fields.

---

## Method: `createSFFileFromFilePath()`

### `async createSFFileFromFilePath(parentId: string, filePath: string, options?: object): Promise<string>`

Creates a new Salesforce File (`ContentDocument`) from a device file path.
This allows creation of Salesforce Files directly from a valid accessible file path on the device.
It is useful when working with files that already exist on the local filesystem.

You must supply a valid `ParentId` (the record to attach the file to) and `FilePath`.
You can also pass optional fields such as `Name`, `ContentType`, `NetworkId`, or any custom fields.

On success, the method resolves to the newly created `ContentDocumentId`.

### Parameters
| Parameter           | Type     | Required | Description          |
| ------------------- | -------- | -------- | -------------------- |
| `parentId`          | `string` | ‚úÖ       | The Salesforce Id of the parent record to attach the file to (e.g., `Account.Id`, `WorkOrder.Id`). |
| `filePath`          | `string` | ‚úÖ       | The full valid file path on the device to the file you want to attach. |
| `options`           | `object` | ‚ùå       | Optional object containing additional fields: |
| `options.name`      | `string` | ‚ùå       | Name to assign to the file instead of using the file‚Äôs original name. |
| `options.contentType` | `string` | ‚ùå     | MIME type of the file (e.g., `"image/jpeg"`). |
| `options.networkId` | `string` | ‚ùå       | Salesforce Experience Cloud Network Id. |
| `options.*`         | `any`    | ‚ùå       | Any additional custom fields to include when creating the `ContentDocument`. |

### Returns
A `Promise<string>` that resolves to the new `ContentDocumentId` created.

### Example
```js
await pulsar.init();

const { AttachmentId, ContentDocumentId, ContentVersionId, FileURL } = await pulsar.createSFFileFromFilePath('001abc012345678ABC', '/storage/emulated/0/DCIM/Camera/photo.jpg', {
  name: 'Photo.jpg',
  contentType: 'image/jpeg',
  networkId: '0DB123456789123',
  CustomField__c: 'My Value'
});

console.log('New Salesforce File Id:', ContentDocumentId);
console.log('File is located at: ', FileURL);
```

### Notes
- The `filePath` must be a valid, accessible path on the device.
- Custom fields must use their full Salesforce API names (e.g., `MyCustomField__c`).
- Only **one file can be created** at a time with this method.
- To create files from base64 data, use `createSFFile()`.
- To create files from the camera, use `createSFFileFromCamera()`.
- The `options` object allows you to pass both standard fields and any additional custom fields.

---

## Method: `createSFFileFromCamera()`

### `async createSFFileFromCamera(parentId: string, options?: object): Promise<string>`
Creates a new Salesforce File by capturing an image from the device camera.
This method triggers the camera and creates a `ContentDocument` record in Salesforce.

You can also optionally pass any additional custom fields as key-value pairs in the `options` object.

### Parameters
| Parameter           | Type     | Required | Description          |
| ------------------- | -------- | -------- | -------------------- |
| `parentId`          | `string` | ‚úÖ       | The Salesforce Id of the parent record to attach the file to (e.g., `Account.Id`, `WorkOrder.Id`). |
| `options`           | `object` | ‚ùå       | Optional object containing: |
| `options.name`      | `string` | ‚ùå       | Optional file name to assign (defaults to captured file name). |
| `options.networkId` | `string` | ‚ùå       | Optional Salesforce Experience Cloud Network Id (required for Community Users). |
| `options.*`         | `any`    | ‚ùå       | Any additional custom fields to include when creating the ContentDocument. |

### Returns
A `Promise<string>` that resolves to the new `ContentDocumentId` created.

### Example
``` js
await pulsar.init();

const { AttachmentId, ContentDocumentId, ContentVersionId, FileURL } = await pulsar.createSFFileFromCamera('001abc012345678ABC', {
  name: 'MyCapturedPhoto.jpg',
  networkId: '0DB123456789123',
  CustomField__c: 'My Value'
});

console.log('New Salesforce File Id:', ContentDocumentId);
console.log('File is located at: ', FileURL);
```

### Notes
- Custom fields must use their full Salesforce API names (e.g., `MyCustomField__c`).
- Only **one file can be created at a time** with this method.
- To create files from existing files on disk, use `createSFFileFromFilePath()`.

---

## Method: `createSFFileBatch()`

### `async createSFFileBatch(files: SFFileInput[]): Promise<CreateSFFileBatchResponse>`
Creates multiple Salesforce Files (`ContentDocument` records) from Base64-encoded file data in a single batch request.

This method is preferred over repeated calls to `createSFFile()` for performance and consistency. It is especially useful when creating many files at once from memory (e.g., images, PDF blobs, or text exports).

### Parameters
| Parameter | Type       | Required | Description                       |
| --------- | ---------- | -------- | --------------------------------- |
| `files`   | `SFFileInput[]` | ‚úÖ       | An array of file definitions, each containing the fields below: |

Each `SFFileInput` has the following properties:

| Field            | Type     | Required | Description                    |
| ---------------- | -------- | -------- | ------------------------------ |
| `ParentId`       | `string` | ‚úÖ       | Salesforce record Id to attach the file to (e.g., `Account.Id`) |
| `Name`           | `string` | ‚úÖ       | File name (e.g., `"invoice.pdf"`) |
| `Body`           | `string` | ‚úÖ       | Base64-encoded file content |
| `ContentType`    | `string` | ‚ùå       | MIME type (e.g., `"application/pdf"`, `"image/jpeg"`) |
| `Description`    | `string` | ‚ùå       | Optional text description  |
| `NetworkId`      | `string` | ‚ùå       | Community Network Id (required for Experience Cloud users) |
| `CustomField__c` | `any`    | ‚ùå       | Any custom fields defined on the `ContentVersion` object |

### Returns
A `Promise<CreateSFFileBatchResponse>` resolving to a `CreateSFFileBatchResponse` object with the following structure:

``` json
{
  "summary": { "success": "TRUE" | "FALSE" },
  "results": {
    "0": {
      "objectId": "069xx0000001234",
      "success": "TRUE",
      "FileURL": "http://localhost/.../File1.jpg"
    },
    "1": {
      "success": "FALSE",
      "error": "Missing required ParentId"
    }
  }
}
```
- `summary.success`: `"TRUE"` if all files succeeded; `"FALSE"` if any failed.
- `results`: A dictionary keyed by numeric string indices, where each entry corresponds to a file.
  - On success: includes `objectId`, `success: "TRUE"`, and `FileURL`
  - On failure: includes `success: "FALSE"` and an `error` message

### Example
``` js
await pulsar.init();

const result = await pulsar.createSFFileBatch([
  {
    ParentId: '001xx00000000123',
    Name: 'contract.pdf',
    Body: 'JVBERi0xLjQKJeLjz9MK...base64...',
    ContentType: 'application/pdf'
  },
  {
    ParentId: '001xx00000000123',
    Name: 'photo.jpg',
    Body: '/9j/4AAQSkZJRgABAQABAAD...base64...',
    ContentType: 'image/jpeg',
    CustomField__c: 'Signed copy'
  }
]);

if (result.summary.success === 'TRUE') {
  console.log('All files uploaded!');
} else {
  console.warn('Some files failed:', result.results);
}

Object.values(result.results).forEach( r => {
  if (r.success.toUpperCase() === 'TRUE') {
    console.log(`Filed uploaded with Id: ${r.objectId}`)
  }
});
```

### Notes
- Use this method to avoid manual `.then()` chaining of individual file uploads.
- File objects are validated individually ‚Äî some may succeed while others fail.
- A failed file will include an `"error"` field in the `results` array.
- To upload from device file paths, use `createSFFileFromFilePathBatch()` instead.

---

## Method: `createSFFileFromFilePathBatch()`

### `async createSFFileFromFilePathBatch(files: SFFilePathInput[]): Promise<CreateSFFileBatchResponse>`
Creates multiple Salesforce Files (`ContentDocument` records) from valid, accessible device file paths in a single batch operation.

This method is ideal when you want to upload a group of files from the local filesystem (e.g., camera roll, downloads folder) to Salesforce in one request.

### Parameters

| Parameter | Type       | Required | Description                   |
| --------- | ---------- | -------- | ----------------------------- |
| `files`   | `SFFilePathInput[]` | ‚úÖ       | An array of file objects. Each must contain the fields below: |

Each `SFFilePathInput` object in the array supports the following fields:

| Field            | Type     | Required | Description                     |
| ---------------- | -------- | -------- | ------------------------------- |
| `ParentId`       | `string` | ‚úÖ       | Salesforce Id of the parent record to attach the file to |
| `FilePath`       | `string` | ‚úÖ       | Local file system path (e.g., `"/storage/emulated/0/DCIM/file.jpg"`) |
| `Name`           | `string` | ‚ùå       | Desired file name (defaults to filename from path) |
| `ContentType`    | `string` | ‚ùå       | MIME type (e.g., `"image/jpeg"`, `"application/pdf"`) |
| `Description`    | `string` | ‚ùå       | Optional file description |
| `NetworkId`      | `string` | ‚ùå       | Salesforce Experience Cloud Network Id |
| `CustomField__c` | `any`    | ‚ùå       | Any custom field you wish to include |

### Returns
A `Promise<CreateSFFileBatchResponse>` resolving to a `CreateSFFileBatchResponse` object structured as:
``` json
{
  "summary": { "success": "TRUE" | "FALSE" },
  "results": {
    "0": {
      "objectId": "069xx0000001234",
      "success": "TRUE",
      "FileURL": "http://localhost/.../file1.jpg"
    },
    "1": {
      "success": "FALSE",
      "error": "File not found"
    }
  }
}
```
- `summary.success`: `"TRUE"` if all files succeeded; `"FALSE"` if any failed.
- `results`: An object with file index keys:
  - On success: includes `objectId`, `success: "TRUE"`, and optional `FileURL`
  - On failure: includes `success: "FALSE"` and `error` message

### Example

``` js
await pulsar.init();

const result = await pulsar.createSFFileFromFilePathBatch([
  {
    ParentId: '001xx00000000123',
    FilePath: '/files/invoice.pdf',
    Name: 'Invoice.pdf',
    ContentType: 'application/pdf'
  },
  {
    ParentId: '001xx00000000123',
    FilePath: '/files/photo.jpg',
    ContentType: 'image/jpeg',
    CustomField__c: 'Snapshot'
  }
]);

if (result.summary.success === 'TRUE') {
  console.log('All files uploaded!');
} else {
  console.warn('Some uploads failed:', result.results);
}

Object.values(result.results).forEach( r => {
  if (r.success.toUpperCase() === 'TRUE') {
    console.log(`Filed uploaded with Id: ${r.objectId}`)
  }
});
```

### Notes
- All file paths must point to valid, accessible files on the device.
- To create files from Base64 strings instead, use `createSFFileBatch()`.
- This method improves performance compared to sequential `createSFFileFromFilePath()` calls.

Use the returned `FileURL` to show or link to the uploaded file locally.

---

## Method: `readSFFile()`
### `async readSFFile(fileId: string, returnBase64Data?: boolean, downloadVersionData?: boolean): Promise<SFFileReadResult[]>`
Retrieves a single Salesforce File record (`ContentDocument` or `ContentVersion`) from the Pulsar local database using the Pulsar Files API.
This method returns metadata and optionally base64-encoded file data for the specified File.

Unlike `select()` or `queryContent()`, which only return field data and file paths, this method can retrieve the full contents of the file (`VersionData`) and, if an image, a base64-encoded thumbnail (`ThumbBody`).

### Parameters
| Parameter             | Type      | Required | Description                                      |
| --------------------- | --------- | -------- | ------------------------------------------------ |
| `fileId`              | `string`  | ‚úÖ       | The Salesforce Id of the ContentDocument or ContentVersion (e.g., `"069xxxxxxxxxxxxxxx"`) |
| `returnBase64Data`    | `boolean` | ‚ùå       | If `true`, returns `VersionData` and `ThumbBody` fields. Default is `false`. |
| `downloadVersionData` | `boolean` | ‚ùå       | If `true` (default), forces Pulsar to download the latest file from Salesforce server if online. If `false`, only uses the local cache if available. |

### Returns
A `Promise<SFFileReadResult[]>` that resolves to an array containing a single `SFFileReadResult` object with the following fields:

| Field         | Type   | Description                           |
| ------------- | ------ | ------------------------------------- |
| `VersionData` | string | Base64-encoded content of the file (included if `returnBase64Data` is `true`) |
| `ThumbBody`   | string | Base64-encoded thumbnail of the image (included if file is an image and `returnBase64Data` is `true`) |
| `FileURL`     | string | Local URL to the full file (always included) |
| `ThumbURL`    | string | Local URL to the image thumbnail (empty string if not an image) |

### Example
``` js
await pulsar.init();

// Read a Salesforce File and get base64 contents
const [file] = await pulsar.readSFFile('0698c00000ABC123', true);
console.log('Base64 contents:', file.VersionData);

// Read file metadata and file URL only
const [localFile] = await pulsar.readSFFile('0698c00000XYZ789', false, false);
console.log('File location:', localFile.FileURL);
```

### Notes
- This method works for both `ContentDocument` and `ContentVersion` Ids.
- The returned `FileURL` and `ThumbURL` fields point to local cached copies on the device or emulator.
- Setting the Pulsar config value `pulsar.attachment.thumbnailMaxSidePixels` determines the maximum size of image thumbnails.
- `queryContent()` is a faster, metadata-only variant and should be preferred for lists of files.
Use `readSFFile()` only when actual file data or guaranteed download freshness is required.

---


## Method: `deleteSFFile()`

### `async deleteSFFile(documentIdList: string[]): Promise<boolean>`
Deletes one or more Salesforce Files (`ContentDocument` records) by Id.
This will remove the file(s) from the local cache and schedule them for deletion from Salesforce on next sync (depending on sync settings).

You must pass an array of valid Salesforce `ContentDocumentId`s.

### Parameters
| Parameter        | Type       | Required | Description                     |
| ---------------- | ---------- | -------- | ------------------------------- |
| `documentIdList` | `string[]` | ‚úÖ       | An array of Salesforce `ContentDocumentId` values to delete (e.g., `["069abc123456789", "069def987654321"]`). |

### Returns
A `Promise<boolean>` that resolves to true if the deletion request was accepted successfully.

### Example
``` js
await pulsar.init();

// Delete a single Salesforce File
await pulsar.deleteSFFile(['069abc123456789']);

// Delete multiple Salesforce Files
await pulsar.deleteSFFile(['069abc123456789', '069def987654321']);
```

### Notes
- The deletion request affects local cached files only; if sync is enabled the deletion will propagate to Salesforce.
- Passing an empty array or non-string values will throw an error.
- To avoid accidental data loss, multiple delete requests should be executed sequentially and not in parallel.
- This method requires an active `pulsar.init()` session.

---


## Method: `updateQuery()`

### `async updateQuery(objectName: string, query: string): Promise<object>`
Executes a raw **SQLlite UPDATE query** against Pulsar‚Äôs local database for a specific Salesforce SObject. This method bypasses standard validation and layout checks, allowing **direct, low-level manipulation** of cached records.

> ‚ö†Ô∏è **Use with caution** ‚Äî this API operates outside of typical create/update flows and does not perform standard validation or relationship enforcement. It is intended for internal tools, testing, or controlled data transformations in offline mode.

### Parameters
| Parameter    | Type     | Required | Description                                           |
| ------------ | -------- | -------- | ----------------------------------------------------- |
| `objectName` | `string` | ‚úÖ       | The API name of the SObject to update (e.g., `"Account"`, `"Contact"`) |
| `query`      | `string` | ‚úÖ       | A raw SQL-style `UPDATE` query string (e.g., `"UPDATE Account SET Status__c = 'Active' WHERE Industry = 'Tech'"`) |

### Returns
A `Promise<object>` that resolves to a response object confirming execution:
``` json
{ "data": "success" }
```
or containing error details.

### Example
``` js
await pulsar.init();

const result = await pulsar.updateQuery(
  'Account',
  "UPDATE Account SET Status__c = 'Active' WHERE Industry = 'Technology'"
);

console.log(result); // { data: 'success' }
```

### Notes
- This method only modifies the local Pulsar database.
- It does not sync changes back to Salesforce automatically ‚Äî you must call `syncData()` if needed.
- **No validation, triggers, or roll-ups are processed**.
- Use when `update()` or `create()` are too restrictive for batch edits or prototyping.

---


## Method: `deleteBatch()`

### `async deleteBatch(objectName: string, ids: string[]): Promise<DeleteSFFileBatchResponse>`
Deletes multiple records for the specified Salesforce SObject in a **single request** using the Pulsar JSAPI. This batch operation is more efficient than issuing individual `delete()` calls for each record.

Each record‚Äôs success or failure is tracked in the response, allowing you to inspect and handle partial failures programmatically.

### Parameters
| Parameter    | Type       | Required | Description                                         |
| ------------ | ---------- | -------- | --------------------------------------------------- |
| `objectName` | `string`   | ‚úÖ       | The API name of the SObject to delete (e.g., `"Account"`, `"WorkOrder"`) |
| `ids`        | `string[]` | ‚úÖ       | An array of Salesforce record IDs to delete. Must contain at least one ID. |

### Returns
A `Promise<DeleteSFFileBatchResponse>` that resolves to a `DeleteSFFileBatchResponse` object confirming execution:
- `summary`: `{ success: "TRUE" | "FALSE" }` ‚Äî `"TRUE"` if all deletions succeeded.
- `results`: An object keyed by record Id, each containing:
  - `objectId`: The record Id
  - `success`: `"TRUE"` or `"FALSE"`
  - `error`: A string message if deletion failed

### Example
``` js
await pulsar.init();

const result = await pulsar.deleteBatch('Account', [
  '001ABC0000001XYZ',
  '001ABC0000002XYZ',
  '001ABC0000003XYZ'
]);

console.log(result.summary.success); // "FALSE" if any failed
console.log(result.results['001ABC0000002XYZ'].error); // Inspect failure reason
```

### Sample Success Response
``` json
{
  "summary": {
    "success": "TRUE"
  },
  "results": {
    "001ABC0000001XYZ": {
      "objectId": "001ABC0000001XYZ",
      "success": "TRUE",
      "error": ""
    },
    "001ABC0000002XYZ": {
      "objectId": "001ABC0000002XYZ",
      "success": "TRUE",
      "error": ""
    }
  }
}
```
### Sample Partial Failure Response
``` json
{
  "summary": {
    "success": "FALSE"
  },
  "results": {
    "001ABC0000001XYZ": {
      "objectId": "001ABC0000001XYZ",
      "success": "FALSE",
      "error": "Dependent child records exist"
    },
    "001ABC0000002XYZ": {
      "objectId": "001ABC0000002XYZ",
      "success": "TRUE",
      "error": ""
    }
  }
}
```

### Notes
- This method only deletes records from the **local Pulsar database**.
- Deletions will be synced back to Salesforce if your sync configuration supports it.
- Partial success is common; check `results` to handle errors gracefully.
- Deletion triggers may affect related records (e.g., rollups or validation).

---


## Method: `queryContent()`

### `async queryContent(filter: string, downloadVersionData?: boolean): Promise<object[]>`
Queries the Pulsar local Salesforce Files (`ContentVersion`) table for file metadata records matching the provided filter.

Unlike `readSFFile()`, this **does not return file contents**, only local file metadata and cached file URLs.

This is highly efficient for bulk file listing or filtered search queries.
The `filter` uses a SQL-style `WHERE` clause compatible with Pulsar‚Äôs local SQLite engine.

### Parameters
| Parameter             | Type      | Required | Description            |
| --------------------- | --------- | -------- | ---------------------- |
| `filter`              | `string`  | ‚úÖ       | SQL-style WHERE clause to filter ContentVersion records (e.g., `"ContentDocumentId = '069xxx'"`) |
| `downloadVersionData` | `boolean` | ‚ùå       | If `true` (default), forces Pulsar to download the latest files from Salesforce server if online. If `false`, only uses the local cache if available. |

### Returns
A `Promise<object[]>` that resolves to an array of ContentVersion metadata objects:

| Field       | Type   | Description                     |
| ----------- | ------ | ------------------------------- |
| `FileURL`   | string | Local device URL to the full file |
| `ThumbURL`  | string | Local device URL to the image thumbnail (empty string if not an image) |
| `FilePath`  | string | Local relative or absolute path to the full file |
| `ThumbPath` | string | Local relative or absolute path to the image thumbnail |

### Example
``` js
await pulsar.init();

// Query for files linked to a specific Account
const files = await pulsar.queryContent(
  "ContentDocumentId in (SELECT ContentDocumentId FROM ContentDocumentLink WHERE LinkedEntityId = '001abc012345678ABC')"
);

console.log(files[0].FileURL);  // outputs local file URL
```

### Notes
- This method works only on the **local cached ContentVersion table**.
- It will not return `VersionData` file contents. Use `readSFFile()` if you need the base64 file contents.
- Use `pulsar.attachment.thumbnailMaxSidePixels` to control max image thumbnail size (same as `readSFFile()`).

---


## Method: `chatterGetFeed()`

### `async chatterGetFeed(parentId: string, options?: { afterDate?: string, beforeDate?: string, orderBy?: string }): Promise<object[]>`
Retrieves Chatter feed items related to a specific Salesforce record. This includes posts, comments, and updates synced by Pulsar's Chatter object sync configuration.

This method wraps the Pulsar `chattergetfeed` request and allows filtering the feed items by date range and sort order.

### Parameters
| Parameter            | Type     | Required | Description                 |
| -------------------- | -------- | -------- | --------------------------- |
| `parentId`           | `string` | ‚úÖ       | The Salesforce Id of the parent object to retrieve feed items for (e.g., `Account`, `WorkOrder`). |
| `options`            | `object` | ‚ùå       | Optional parameters for filtering or ordering the results. |
| `options.afterDate`  | `string` | ‚ùå       | ISO 8601 timestamp. Filters for feed items created after this `datetime`. |
| `options.beforeDate` | `string` | ‚ùå       | ISO 8601 timestamp. Filters for feed items created before this `datetime`. |
| `options.orderBy`    | `string` | ‚ùå       | SQL-style ORDER BY clause without the `ORDER BY` keyword (e.g., `"CreatedDate DESC"`). |

### Returns
A `Promise<object[]>` that resolves to an array of Chatter `FeedItem` objects. These may include properties like `Id`, `Body`, `Title`, `CommentCount`, `LikeCount`, `CreatedDate`, `ParentId`, and `CreatedById`, among others.

### Example
```js
await pulsar.init();

const feedItems = await pulsar.chatterGetFeed('001xx000003DGX5AAO', {
  afterDate: '2024-01-01T00:00:00.000+0000',
  beforeDate: '2024-02-01T00:00:00.000+0000',
  orderBy: 'CreatedDate DESC'
});

console.log(feedItems);
```

### Notes
- The feed is limited to Chatter data available offline based on your Pulsar sync configuration.
- If no filters are provided, all locally available feed items for the given `parentId` will be returned.
- The `orderBy` clause supports standard Salesforce date and field names (e.g., `"CreatedDate ASC"`).

---

## Method: `chatterPostFeed()`

### `async chatterPostFeed(message: string, parentId: string, parentFeedItemId?: string): Promise<void>`
Posts a new Chatter feed item or comment to a Salesforce record using Pulsar.
If `parentFeedItemId` is specified, the message is posted as a comment under the referenced Chatter post.

### Parameters
| Parameter          | Type     | Required | Description  |
| ------------------ | -------- | -------- | ------------ |
| `message`          | `string` | ‚úÖ       | The message body to post in the feed. |
| `parentId`         | `string` | ‚úÖ       | The Salesforce Id of the parent object (e.g., `Account`, `WorkOrder`). |
| `parentFeedItemId` | `string` | ‚ùå       | If provided, the message will be posted as a comment on this feed item. |

### Returns
A `Promise<void>` that resolves when the feed post or comment is successfully created.

### Example
```js
await pulsar.init();

// Post a new feed item
await pulsar.chatterPostFeed('This is a new Chatter post.', '001xx000003DGX5AAO');

// Post a comment on an existing feed item
await pulsar.chatterPostFeed('This is a comment.', '001xx000003DGX5AAO', '0D5xx0000001XYZ');
```

### Notes
- Chatter attachments are not supported by this method.
- All posts are stored offline and synced per your Pulsar Chatter sync configuration.
- If `parentFeedItemId` is specified, the `parentId` must still refer to the root object (e.g., Account).

---


## Method: `getSetting()`

### `async getSetting(key: string): Promise<GetSettingResponse>`
Retrieves a named **Pulsar Setting** from your configuration table. This method queries the offline Pulsar bridge for a setting value by key and returns both a flag indicating whether the setting exists and the value (if present).

### Parameters
| Parameter | Type     | Required | Description                                      |
| --------- | -------- | -------- | ------------------------------------------------ |
| `key`     | `string` | ‚úÖ       | The unique key of the Pulsar Setting to retrieve |

### Returns
A `Promise<object>` resolving to an object with:
- `"Exists"`: `"TRUE"` or `"FALSE"`
- `[key]`: The corresponding setting value (if exists)

### Example
``` js
await pulsar.init();

const result = await pulsar.getSetting('MyCustomSetting');

if (result.Exists === 'TRUE') {
  console.log('Setting value:', result['MyCustomSetting']);
} else {
  console.log('Setting not found.');
}
```

### Notes
- If the setting is not found, the `"Exists"` field will be `"FALSE"` and the key will not be present.
- This method requires the key to be a valid, non-empty string.
- Setting values may be strings, JSON objects, or other primitives depending on how they were stored.

---


## Method: `getSettingAttachment()`

### `async getSettingAttachment(key: string): Promise<GetSettingAttachmentResponse>`
Retrieves a **Pulsar Setting Attachment** for the specified key. This method returns the filename, full file path, and setting value associated with the given key from the offline Pulsar configuration store.

This is useful for retrieving binary or static assets (e.g., images, logos, configuration files) stored in Pulsar settings.

### Parameters
| Parameter | Type     | Required | Description                                            |
| --------- | -------- | -------- | ------------------------------------------------------ |
| `key`     | `string` | ‚úÖ       | The key name of the Pulsar Setting to retrieve the attachment for |

### Returns
A `Promise<GetSettingAttachmentResponse>` that resolves to an object with the following fields:
| Field      | Type     | Description                                             |
| ---------- | -------- | ------------------------------------------------------- |
| `FileName` | `string` | The name of the file (e.g., `"logo.png"`)               |
| `FilePath` | `string` | Full local path to the file (e.g., `"/files/logo.png"`) |
| `FileURL`  | `string` | Local browser-accessible URL to the file (e.g., `"file:///..."`) |
| `key`      | `any`    | The setting key                                         |

### Example
``` js
await pulsar.init();

const result = await pulsar.getSettingAttachment('LogoImage');

console.log(result.FileName);   // "logo.png"
console.log(result.FilePath);   // "/files/logo.png"
console.log(result.FileURL);    // "file:///data/user/0/com.app/cache/logo.png"
console.log(result.key);        // "LogoImage"
console.log(result.LogoImage);  // setting value associated with 'LogoImage'
```

### Notes
- If the attachment is missing, the method will throw an error.
- The setting key must be a valid, non-empty string.
- Files returned may be images, documents, or other binary assets that have been stored via Pulsar configuration tools.

---


## Method: `getContentUrl()`

### `async getContentUrl({ Id, Title }: { Id?: string, Title?: string }): Promise<object>`
Retrieves a **local, offline-accessible URL** for a document in the Salesforce Content Library.

You must provide either the `Id` of the ContentDocument or the `Title`. The returned URL can be used to load files such as PDFs, videos, images, or HTML content directly in a web context. This is useful for offline document browsing or embedded content workflows.

> **‚ö†Ô∏è Note: The returned URL may already contain query parameters required by Pulsar. Do not overwrite or append to them without checking for existing values.**

### Parameters
**At least one of Id or Title must be provided.**
| Parameter | Type     | Required | Description                             |
| --------- | -------- | -------- | --------------------------------------- |
| `Id`      | `string` | ‚ùå       | Salesforce `ContentDocument` Id (e.g., `'069xx0000001234'`) |
| `Title`   | `string` | ‚ùå       | Title of the document in the content library |

### Returns
A `Promise<object>` that resolves to an object with the following fields:
| Field   | Type     | Description                                    |
| ------- | -------- | ---------------------------------------------- |
| `url`   | `string` | Local browser-safe URL to the offline document |
| `title` | `string` | Title of the matched ContentDocument           |

### Example
``` js
const result = await pulsar.getContentUrl({ Title: 'Safety Manual' });
// result = { url: 'http://127.0.0.1:17014/content/abc123', title: 'Safety Manual' }
```

---


## Method: `getAutosyncStatus()`

### `async getAutosyncStatus(): Promise<string>`
Retrieves Pulsar's current **auto-sync status**.

This determines whether Pulsar automatically initiates a sync when launching the app or returning from the background.

### Returns
A `Promise<string>` that resolves to either:

| Value     | Description           |
| --------- | --------------------- |
| `'TRUE'`  | Auto-sync is enabled  |
| `'FALSE'` | Auto-sync is disabled |

### Example
``` js
const status = await pulsar.getAutosyncStatus();
console.log(`Auto-sync is currently ${status}`);
```

---


## Method: `setAutosyncStatus(enable)`

### `async setAutosyncStatus(enable: boolean | string): Promise<string>`
Sets Pulsar's **auto-sync status**.

This enables or disables whether a sync starts automatically on app open or resume.

### Parameters
| Parameter | Type                | Required | Description                                                   |
| --------- | ------------------- | -------- | ------------------------------------------------------------- |
| `enable`  | `boolean \| string` | ‚úÖ       | `true` or `'TRUE'` to enable, `false` or `'FALSE'` to disable |

### Returns
A `Promise<string>` that resolves to the new status:

``` js
await pulsar.setAutosyncStatus(false);
```

---


## Method: `userPhoto()`

### `async userPhoto(): Promise<UserPhotoResult>`
Retrieves the Salesforce user‚Äôs small and full photo URLs.

### Returns
A `Promise<UserPhotoResult>` resolving to a `UserPhotoResult` object with the following fields:
- `smallphoto` (`string`): URL to the user‚Äôs small photo thumbnail.
- `fullphoto` (`string`): URL to the user‚Äôs full-size photo.

### Example
```js
await pulsar.init();
const photos = await pulsar.userPhoto();
console.log('Small:', photos.smallphoto);
console.log('Full :', photos.fullphoto);
```

---


## Method: `getDevServerEnabled()`

### `async getDevServerEnabled(docId?: string): Promise<string>`
Returns whether the local development server is currently enabled.

### Parameters
| Parameter | Type     | Required | Description                         |
| --------- | -------- | -------- | ----------------------------------- |
| `docId`   | `string` | ‚ùå       | Optional Document Id to scope check |

### Returns
A `Promise<string>` that resolves to:
- `'TRUE'` if the dev server is enabled.
- `'FALSE'` if disabled.

### Example
```js
await pulsar.init();
// Check globally\ nconst status = await pulsar.getDevServerEnabled();
console.log(`Dev server is ${status}`);

// Check for a specific doc
const docStatus = await pulsar.getDevServerEnabled('001XYZ');
console.log(`Dev for 001XYZ: ${docStatus}`);
```

---


## Method: `getPlatform()`

### `async getPlatform(): Promise<string>`
Retrieves the current runtime platform.

### Returns
A `Promise<string>` resolving to one of:
- `'windows'`
- `'android'`
- `'ios'`

### Example
```js
await pulsar.init();
const platform = await pulsar.getPlatform();
console.log(`Running on: ${platform}`);
```

---


## Method: `getLocation()`

### `async getLocation(locationAccuracy?: 'Fine' | 'Medium' | 'Coarse'): Promise<LocationResult>`
Retrieves the device‚Äôs current geographical coordinates.

### Parameters
| Parameter          | Type     | Required | Description                                                         |
| ------------------ | -------- | -------- | ------------------------------------------------------------------- |
| `locationAccuracy` | `string` | ‚ùå       | One of `'Fine'`, `'Medium'`, or `'Coarse'`. Defaults to `'Medium'`. |

### Returns
A `Promise<LocationResult>` resolving to a `LocationResult` object with:
- `latitude` (`number`)
- `longitude` (`number`)
- `locationAccuracy` (`string`)

### Example
```js
await pulsar.init();
const coords = await pulsar.getLocation();
console.log(`Lat: ${coords.latitude}, Lon: ${coords.longitude}`);
```

---


## Method: `getPlatformFeatures()`

### `async getPlatformFeatures(): Promise<PlatformFeature[]>`
Retrieves information about the features available on the current platform. This is useful for adapting application behavior to optional or platform-specific capabilities.

### Return Type
`Promise<PlatformFeature[]>` ‚Äì An array of feature objects. Each feature entry has the following shape:
| Property      | Type      | Description                                                            |
| ------------- | --------- | ---------------------------------------------------------------------- |
| `featureName` | `string`  | The name of the feature (e.g., `"OfflineMode"`, `"DarkTheme"`).        |
| `isAvailable` | "TRUE" or "FALSE" |  Whether the feature is available on this platform.            |
| `value`       | `string?` | *(Optional)* A string value with additional details about the feature. |

### Example
``` js
await pulsar.init();

const features = await pulsar.getPlatformFeatures();

for (const feature of features) {
  console.log(`${feature.featureName}: ${feature.isAvailable}`);
  if (feature.value) {
    console.log(`  value: ${feature.value}`);
  }
}
```

### Returns
An array of  `PlatformFeature` objects.
``` js
[
  { "featureName": "OfflineMode", "isAvailable": "TRUE" },
  { "featureName": "DarkTheme", "isAvailable": "FALSE", "value": "beta" }
]
```

### Notes
* The list of features depends on the underlying Pulsar platform version and runtime context (iOS, Android, Web).
* If a feature is not supported, it will appear with "isAvailable": "FALSE".
* Some features may also provide an optional value field, which can contain version numbers, mode identifiers, or other platform-specific information.

---


## Method: `getCustomLabels()`

### `async getCustomLabels(labelNames: string[], locale?: string): Promise<object>`
Fetches Salesforce Custom Labels as Pulsar Settings.

### Parameters
| Parameter    | Type       | Required | Description                                              |
| ------------ | ---------- | -------- | -------------------------------------------------------- |
| `labelNames` | `string[]` | ‚úÖ       | Array of label API names to retrieve.                    |
| `locale`     | `string`   | ‚ùå       | Optional locale (e.g. `'es_MX'`). Overrides user locale. |

### Returns
A `Promise<object>` resolving to an object mapping each label name to its value (or `null` if not found).

### Example
```js
await pulsar.init();
const labels = await pulsar.getCustomLabels(['Welcome_Message','Farewell_Message'], 'es');
console.log(labels.Welcome_Message);
```

---


## Method: `logMessage()`

### `async logMessage(message: string, level?: 'info' | 'warn' | 'error' | 'debug' | 'Verbose'): Promise<void>`
Logs a custom message to the Pulsar runtime log.

### Parameters
| Parameter | Type     | Required | Description                                                                |
| --------- | -------- | -------- | -------------------------------------------------------------------------- |
| `message` | `string` | ‚úÖ       | Message to log (prefixed with `JSAPI:`).                                   |
| `level`   | `string` | ‚ùå       | One of `'info'` (default), `'warn'`, `'error'`, `'debug'`, or `'Verbose'`. |

### Example
```js
await pulsar.init();
pulsar.logMessage('Initialization complete', 'debug');
```

---


## Method: `getFSLTemplate()`

### `async getFSLTemplate(templateId: string, templateName: string): Promise<GetFSLTemplateResponse>`
Retrieves metadata for Field Service Lightning (FSL) Service Report templates. This method can return either a list of available templates or the metadata for a specific template, depending on the arguments provided.

This API only returns data if Field Service Sync is enabled.

| Parameter      | Type     | Required | Description                                                                |
| -------------- | -------- | -------- | -------------------------------------------------------------------------- |
| `templateId`   | `string` | No       | The Salesforce Id of the Service Report Template to retrieve.              |
| `templateName` | `string` | No       | The name of the Service Report Template to retrieve. Ignored if Id is set. |

> If both parameters are provided, `templateId` takes precedence.

Returns
A `Promise<GetFSLTemplateResponse>` resolving to the data from the `GetFSLTemplateResponse`.

### Example ‚Äì Get all available templates
``` js
const templates = await pulsar.getFSLTemplate();
console.log(templates); // { "Report A": "0TTxx0000000001", "Report B": "0TTxx0000000002" }
```

### Example ‚Äì Get template by Id
``` js
const template = await pulsar.getFSLTemplate("0TTxx0000000001");
console.log(template); // { Id: "0TTxx0000000001", Name: "Report A", ... }
```

### Example ‚Äì Get template by Name
``` js
const template = await pulsar.getFSLTemplate(undefined, "Report A");
console.log(template); // { Id: "0TTxx0000000001", Name: "Report A", ... }
```

---


## Method: `executeFSLFlow()`

### `async executeFSLFlow(flowName, flowId, actionLabel, id, userId, parentId): Promise<object>`
Executes a `Field Service Mobile Flow` on the device, opening the native Flow presentation window. The flow can be specified by either its API name (`flowName`) or version Id (`flowId`). Only Flows of type `"Field Service Mobile Flow"` are supported, and only the **active version** of each flow will be synced.

This functionality mimics how flows behave in the Salesforce Field Service mobile app, including support for screens, variables, and record context. This method is only available if **Field Service Lightning is enabled** in Pulsar, and Flow metadata must be refreshed using the _Refresh Settings_ button in the Pulsar Settings screen before new or updated flows are available.

### Parameters
| Parameter     | Type     | Required                   | Description                                                        |
| ------------- | -------- | -------------------------- | ------------------------------------------------------------------ |
| `flowName`    | `string` | ‚ú± if `flowId` is omitted   | The API name of the Flow to execute.                               |
| `flowId`      | `string` | ‚ú± if `flowName` is omitted | The Id of the Flow version to execute.                             |
| `actionLabel` | `string` | No                         | Optional label that will be shown in the Flow presentation window. |
| `id`          | `string` | No                         | The Id of the record the Flow is launched from.                    |
| `userId`      | `string` | No                         | The User Id to inject into the Flow. Defaults to current user.     |
| `parentId`    | `string` | No                         | The parent record Id (e.g., a related Work Order).                 |

### Returns
A `Promise<object>` resolving to an object containing:
``` js
{
  executed: true // true if the Flow was successfully presented to the user
}
```

### Example
``` js
const result = await pulsar.executeFSLFlow(
  'Sales_Funnel_Flow1',         // flowName
  undefined,                    // flowId
  'Pre-sale Form Flow',         // actionLabel
  '08p23456789ABCDEFG',         // id
  undefined,                    // userId
  '0WO23456789ABCDEFG'          // parentId
);

console.log(result.executed); // true if the Flow UI was launched
```
> ‚ö†Ô∏è Flows must be synced in Pulsar via the Settings screen before this method will recognize them. Only Flows marked as _Field Service Mobile Flow_ in Salesforce will be available.

---


## Method: `createServiceReportFromFilePath()`

### `async createServiceReportFromFilePath(parentId: string, filePath: string, templateId: string, documentName: string, contentType: string): Promise<string>`
Creates a new Service Report record in Salesforce from a local file and associates it to a parent object. This is commonly used in conjunction with the `saveAs` method to first generate a PDF or other output, and then store it in Salesforce using a predefined Service Report Template.

This method is only available if Field Service Lightning is enabled and configured.

### Parameters
| Parameter      | Type     | Required | Description                                                                           |
| -------------- | -------- | -------- | ------------------------------------------------------------------------------------- |
| `parentId`     | `string` | ‚úÖ        | The Id of the object (e.g., Account, WorkOrder) to associate the Service Report with. |
| `filePath`     | `string` | ‚úÖ        | The local file path to the saved document. Usually returned by `saveAs`.              |
| `templateId`   | `string` | ‚úÖ        | The Id of the Service Report Template used to generate this report.                   |
| `documentName` | `string` | ‚úÖ        | The desired filename to store in Salesforce (e.g., `"file.pdf"`).                     |
| `contentType`  | `string` | ‚úÖ        | The MIME type of the file (e.g., `"application/pdf"`).                                |

### Returns
A `Promise<string>` resolving to the `Id` of the newly created Service Report record.

### Example
``` js
const filePath = await pulsar.saveAs({ filename: "report.pdf" });

const reportId = await pulsar.createServiceReportFromFilePath(
  "001xx000003NGsZAAW",           // ParentId
  filePath,                       // FilePath
  "0TTxx000000abcd",              // TemplateId
  "report.pdf",                   // DocumentName
  "application/pdf"              // ContentType
);

console.log("Created report with Id:", reportId);
```

---


## Method: `listviewInfo()`

### `async listviewInfo(objectName: string): Promise<ListviewLabelMap>`
This method **only** returns a map of listview IDs to their labels. It **does not contain any metadata or field (column) values**.

To retrieve metadata about a listview, use an ID returned by `listviewInfo` with `listviewMetadata`.

To retrieve column values, use a `read` or `select` call to obtain the actual field values. Format them according to the `schema` for the object.

### Parameters
| Parameter    | Type     | Required | Description                                               |
| ------------ | -------- | -------- | --------------------------------------------------------- |
| `objectName` | `string` | ‚úÖ        | The API name of the Salesforce object (e.g., `'Account'`) |

### Returns
A `Promise<ListviewLabelMap>` resolving to a dictionary of Listview labels indexed by their Ids.

Example return value:
``` json
{
  "00B1t0000051234": "All Accounts",
  "00B1t0000055678": "My Active Accounts"
}
```

---


## Method: `listviewMetadata(objectName, listviewId)`

### `listviewMetadata(objectName: string, listviewId: string): Promise<ListviewLayout>`
This method does **not** return general object metadata like `getLayout` or `getSObjectSchema`. Instead, it returns a `ListviewLayout`, which defines the **column layout, filters, labels, and sorting behavior** of a single listview.

Use this when displaying a listview ‚Äî not when editing or generating field-level metadata.

Use this after obtaining a listview ID via `listviewInfo`.

> **Important**: The columns for the listview are defined by the `fields` property. There is no `columns` property. The `string` values in the `fields` property can be used to reference the field properties directly on the `SObject` or used to generate queries.

### Parameters
| Name         | Type     | Required | Description                                             |
| ------------ | -------- | -------- | ------------------------------------------------------- |
| `objectName` | `string` | ‚úÖ        | The API name of the SObject (e.g., `"Account"`).        |
| `listviewId` | `string` | ‚úÖ        | The unique ID of the listview to retrieve metadata for. |


### Returns
A `Promise<ListviewLayout>` that resolves to a `ListviewLayout` object:
``` js
{
  fields: string[];      // A list of strings corresponding to the fields to display as columns in this list. These values can be used directly. Their corresponding labels are in the `labels` property.
  labels: string[];      // Column display labels matching the order of `fields`
  listId: string;        // ID of the listview
  whereClause: string;   // SQLite WHERE clause applied by the listview
  filters: string[];     // Additional SQLite filters, often user-supplied
  orderBy: string;       // SQLite ORDER BY clause for sorting the results
}
```

### Example
``` js
const listViews = await pulsar.listviewInfo('Account');

// find the "All Accounts" listview Id
const listviewId = Object.entries(listViews).find(([, label]) => label === 'All Accounts')?.[0];

if (listviewId) {
  const metadata = await pulsar.listviewMetadata('Account', listviewId);
  console.log(metadata.fields); // ‚Üí ['Name', 'Industry', 'OwnerId']
  console.log(metadata.orderBy); // ‚Üí "CreatedDate DESC"
}

const listviewColumnFields = listviewData.fields; // an array of the field names to display for each column in each row
const listviewColumnLabels = listviewData.labels; // an array of the labels for each column for the listview

// Get all the accounts
const records = await pulsar.read('Account'); // No filters = all locally available accounts

// Each entry in recordInfo corresponds to a row in the listview. Each property of every entry corresponds to a column for that row.
const recordInfo = records.map(record => {
  const info = {};
  for (let i = 0; i < listviewColumnFields.length; i++) {
    const field = listviewColumnFields[i];
    const label = listviewColumnLabels[i];
    info[label] = record[field];
  }
  return info;
});
```

### Notes
- The `fields` and `labels` arrays are parallel ‚Äî field names and their corresponding UI labels appear in the same order.
- The filtering and sorting metadata (`filters`, `whereClause`, `orderBy`) are expressed using SQLite syntax and can be passed directly to select calls.
- If no `listviewId` is provided, there is currently no fallback to Search Layouts ‚Äî a future JSAPI method may support that.

---


## Method: `setLeavePageMessage()`

### `async setLeavePageMessage(message: string): Promise<void>`
Sets a custom message that will be displayed to the user if they attempt to navigate away from the current screen.

This method is useful for warning users about unsaved changes or important actions they may be interrupting.

### Parameters
| Parameter | Type     | Required | Description                                                                |
| --------- | -------- | -------- | -------------------------------------------------------------------------- |
| `message` | `string` | ‚úÖ       | The message to display when the user attempts to leave the current screen. |

### Returns
A `Promise<void>` that resolves once the leave page message has been set.

### Example
``` js
await pulsar.setLeavePageMessage("Are you sure you want to leave this page?");
```

---


## Method: `exit()`

### `async exit(): Promise<void>`
Closes the current Pulsar application or navigates back to the host environment.

This method is typically used to programmatically exit the app after an action is completed or when the user chooses to leave explicitly.

### Parameters
None.

### Returns
A `Promise<void>` that resolves once the app has been exited.

Example
``` js
await pulsar.exit();
```

---


## Method: `showCreate()`

### `async showCreate(objectType: string, defaultFieldValues?: object): Promise<void>`
Opens the native Salesforce create screen for the specified object type.

This method allows users to create a new Salesforce record directly within the Pulsar app, optionally pre-populating fields.

### Parameters
| Parameter            | Type     | Required | Description                                                            |
| -------------------- | -------- | -------- | ---------------------------------------------------------------------- |
| `objectType`         | `string` | ‚úÖ       | The Salesforce object type to create (e.g., `"Account"`, `"WorkOrder"`). |
| `defaultFieldValues` | `object` | ‚ùå       | An object of default field values to prefill in the create form. |

### Returns
A `Promise<void>` that resolves once the create screen is **displayed**.

### Example
``` js
await pulsar.showCreate('Account', { Name: 'New Account', Industry: 'Technology' });
```

---


## Method: `viewObject(objectName, Id, editmode?)`

### `async viewObject(objectName: string, Id: string, editmode?: string): Promise<object>`
Opens a Salesforce record in the native UI, either in view mode or edit mode. This method uses the string flag `"TRUE"` or `"FALSE"` to control whether the record is launched in edit mode.

### Parameters
| Parameter    | Type     | Required | Description                                                                  |
| ------------ | -------- | -------- | ---------------------------------------------------------------------------- |
| `objectName` | `string` | ‚úÖ       | The Salesforce object type (e.g., `"Account"`).                              |
| `Id`         | `string` | ‚úÖ       | The record Id of the object to view.                                         |
| `editmode`   | `string` | ‚ùå       | `"TRUE"` to open in edit mode, `"FALSE"` (default) to open in view mode. Must be a string literal. |

### Returns
A `Promise<object>` that resolves when the navigation is complete. This result typically reflects the success or cancellation of the operation.

### Example
``` js
// Open Account record in view mode (default)
await pulsar.viewObject('Account', '001xx000003DHPoAAO');

// Open Account record in edit mode
await pulsar.viewObject('Account', '001xx000003DHPoAAO', 'TRUE');
```

---


## Method: `viewRelated(objectName, parentId, relationshipName)`

### `async viewRelated(objectName: string, parentId: string, relationshipName: string): Promise<object>`
Opens a related list (e.g., Contacts, WorkOrders) for a specified parent record in the native UI.

### Parameters
| Parameter          | Type     | Required | Description                                                              |
| ------------------ | -------- | -------- | ------------------------------------------------------------------------ |
| `objectName`       | `string` | ‚úÖ       | The Salesforce object type of the parent (e.g., `"Account"`).            |
| `parentId`         | `string` | ‚úÖ       | The record Id of the parent object.                                      |
| `relationshipName` | `string` | ‚úÖ       | The API name of the relationship (e.g., `"Contacts"` or `"WorkOrders"`). |

### Returns
A `Promise<object>` that resolves with UI navigation results.

### Example
``` js
await pulsar.viewRelated('Account', '001xx000003DHPoAAO', 'Contacts');
```

--


## Method: `viewList(objectName, listViewId)`

### async viewList(objectName: string, listViewId: string): Promise<object>
Displays a Salesforce list view for the given object and view Id.

### Parameters
| Parameter    | Type     | Required | Description                                                               |
| ------------ | -------- | -------- | ------------------------------------------------------------------------- |
| `objectName` | `string` | ‚úÖ       | The Salesforce object type (e.g., `"Account"`).                           |
| `listViewId` | `string` | ‚úÖ       | The Id of the list view to display (retrievable from `listViewMetadata`). |

### Returns
A `Promise<object>` that resolves with a navigation response.

### Example
``` js
await pulsar.viewList('Account', '00Bxx0000018XZTUA2');
```

---


## Method: `lookupObject()`

### `async lookupObject(objectType: string, filter?: object): Promise<object[]>`
Opens a native object lookup screen and allows the user to select one or more records.

This method displays a searchable list of records of the given object type and returns an array of the selected records.

> **Always check for and use the first element of the returned array (e.g., `result[0]`) unless multiple selections are expected.**

### Parameters
| Parameter    | Type     | Required | Description                                                             |
| ------------ | -------- | -------- | ----------------------------------------------------------------------- |
| `objectType` | `string` | ‚úÖ       | The Salesforce object type to look up (e.g., `"Account"`, `"Contact"`). |
| `filter`     | `object` | ‚ùå       | Optional filter criteria or a reference to a saved list view key.       |

### Returns
A `Promise<object[]>` that **resolves to an array of selected record objects**. Each object typically all of that objects fields including the `Id`.

### Example
``` js
const selectedAccounts = await pulsar.lookupObject('Account', { filter: 'MyAccounts' });
selectedAccounts.forEach(account => {
  console.log(`Account Id: ${account.Id}`, account);
});
```

---


## Method: `scanBarcode()`

### `async scanBarcode(): Promise<{ text: string, format: string }>`
Opens the native barcode scanner and returns the result of a successful scan.

This method activates the device‚Äôs camera, scans a barcode, and returns the decoded text and format.

### Parameters
None.

### Returns
A `Promise<object>` that resolves to an object with the following fields:
| Field    | Type     | Description                                                          |
| -------- | -------- | -------------------------------------------------------------------- |
| `text`   | `string` | The scanned barcode content.                                         |
| `format` | `string` | The format of the scanned barcode (e.g., `"QR_CODE"`, `"CODE_128"`). |

### Example
``` js
const result = await pulsar.scanBarcode();
console.log(`Scanned: ${result.text} (format: ${result.format})`);
```

---


## Method: `executeQuickAction()`

### `async executeQuickAction(ActionName: string, contextId?: string, fields?: object): Promise<object>`
Launches a Salesforce Quick Action by its API name. This method optionally accepts a context record ID and default field values to pre-populate the action form.

### Parameters
| Parameter    | Type     | Required | Description                                                |
| ------------ | -------- | -------- | ---------------------------------------------------------- |
| `ActionName` | `string` | ‚úÖ       | API name of the Salesforce Quick Action to execute         |
| `contextId`  | `string` | ‚ùå       | Optional ID of the record to use as context for the action |
| `fields`     | `object` | ‚ùå       | Optional key-value map of default field values to pre-fill |

### Returns
A `Promise<object>` that resolves to a result object, typically including:
- `executed` (boolean): Whether the action was executed
- `quickActionResult` (object): Result data returned by the Quick Action execution

### Example
``` js
await pulsar.init();

const quickActionName = 'LogACall';
const accountId = '500ABC0000001XYZ';
const result = await pulsar.executeQuickAction(quickActionName, accountId, {
  Subject: 'Follow-up Call',
  Description: 'Discussed case resolution.'
});

console.log(result.executed); // true
console.log(result.quickActionResult); // additional result data
```

### Notes
- This method wraps the Pulsar JSAPI call `executeQuickAction` and should not be used with `bridge.send` directly.
- Default field values are passed directly into the action and must match the expected data types and field names.

---


## Method: `cameraPhoto()`

### `async cameraPhoto(): Promise<{ filePath: string }>`
Launches the device camera and captures a new photo.

This method activates the native camera interface, allowing the user to take a picture. The resulting image is saved locally and returned as a file path.

### Parameters
None.

### Returns
A `Promise<object>` that resolves to an object with the following field:
| Field      | Type     | Description                                  |
| ---------- | -------- | -------------------------------------------- |
| `filePath` | `string` | The full local file path to the saved photo. |

### Example
``` js
const result = await pulsar.cameraPhoto();
console.log(`Photo saved at: ${result.filePath}`);
```

---


## Method: `cameraPhotoPicker()`

### `async cameraPhotoPicker(): Promise<PhotoFileMetadata[]>`
Opens the device gallery to pick one or more photos.

### Parameters
None.

### Returns
`Promise<PhotoFileMetadata[]>` ‚Äî A promise that resolves to an array of metadata objects representing the selected photos.

### Example
``` js
const results = await pulsar.cameraPhotoPicker();

if (Array.isArray(results) && results.length > 0) {
  results.forEach((file, index) => {
    console.log(`Photo ${index + 1}:`);
    console.log(`  File Name: ${file.FileName}`);
    console.log(`  MIME Type: ${file.ContentType}`);
    console.log(`  Full Path: ${file.FilePath}`);
    console.log(`  File URL:  ${file.FileURL}`);
    console.log(`  Relative Path: ${file.RelativeFilePath}`);
  });
} else {
  console.log('No photos were selected.');
}
```

---


## Method: `filePicker()`

### `async filePicker(): Promise<{ filePath: string }>`
Opens the native file picker, allowing the user to select a file from the device.

This method lets users browse their local storage and select a file. The full file path to the selected file is returned.

### Parameters
None.

### Returns
A `Promise<object>` that resolves to an object with the following field:
| Field      | Type     | Description                                    |
| ---------- | -------- | ---------------------------------------------- |
| `filePath` | `string` | The full local file path to the selected file. |

Example
``` js
const result = await pulsar.filePicker();
console.log(`User selected file: ${result.filePath}`);
```

---


## Method: `displayUrl()`

### `async displayUrl(options: { url: string }): Promise<void>`
Opens a web page in a native Pulsar-hosted browser tab or external viewer.

This method allows the app to launch a given URL in the platform‚Äôs preferred browser context. This is useful for displaying external content or Salesforce-hosted pages.

### Parameters
| Parameter | Type   | Required | Description                                             |
| --------- | ------ | -------- | ------------------------------------------------------- |
| `options` | object | ‚úÖ       | An object containing the `url`.                         |
| `url`     | string | ‚úÖ       | The web address to open (e.g., `"https://google.com"`). |

### Returns
A `Promise<void>` that resolves once the browser tab is launched.

### Example
``` js
await pulsar.displayUrl({ url: 'https://google.com' });
```

---


## Method: `getOnlineStatus()`

### `async getOnlineStatus(): Promise<boolean>`
Retrieves the current online/offline status of the Pulsar client. This is useful for diagnostics, UI indicators, or conditional logic that depends on network connectivity or offline simulation.

### Returns
A `Promise<boolean>` ‚Äî resolves to:
- `true`: if Pulsar is currently online.
- `false`: if Pulsar is currently offline.

### Example
``` js
await pulsar.init();

const isOnline = await pulsar.getOnlineStatus();
console.log('Pulsar is currently:', isOnline ? 'Online' : 'Offline');
```

### Notes
- This reflects the current simulated online status and not the actual device connectivity.
- Can be used in tandem with `setOnlineStatus()` for testing or UX scenarios.

---


## Method: `setOnlineStatus()`

### `async setOnlineStatus(online: boolean): Promise<boolean>`
Manually sets the online/offline simulation state for the Pulsar client. This allows developers to mimic offline mode behavior in their applications for testing or training purposes.

### Parameters
| Parameter | Type    | Required | Description                                         |
| --------- | ------- | -------- | --------------------------------------------------- |
| `online`  | boolean | ‚úÖ        | `true` to simulate online mode, `false` for offline |

### Returns
A Promise<boolean> ‚Äî resolves to:
- `true`: if the status change succeeded.
- `false`: if Pulsar returned a non-success result.

### Example
``` js
await pulsar.init();

await pulsar.setOnlineStatus(false);  // Simulate offline
const status = await pulsar.getOnlineStatus(); // Should return false
console.log('Current status:', status ? 'Online' : 'Offline');
```

### Notes
- This does not affect actual device networking ‚Äî only the Pulsar runtime status.

---


## Method: `getNetworkStatus()`

### `async getNetworkStatus(): Promise<object>`
Retrieves the current network connectivity status of the device running Pulsar. This reflects the actual network state as detected by the operating system (e.g., whether the device is on Wi-Fi or has no connection), regardless of Pulsar's internal online/offline simulation mode.

This is useful for determining if a real network is available before attempting syncs, API calls, or loading remote assets.

### Returns
A `Promise<object>` resolving to an object with:
| Field            | Type     | Description                                                  |
| ---------------- | -------- | ------------------------------------------------------------ |
| `isConnected`    | `string` | `"TRUE"` if network access is available, `"FALSE"` otherwise |
| `connectionType` | `string` | Type of connection: `"wifi"`, `"cellular"`, or `"none"`      |

### Example
``` js
await pulsar.init();

const status = await pulsar.getNetworkStatus();

if (status.isConnected === 'TRUE') {
  console.log('Network type:', status.connectionType);
} else {
  console.warn('Device is offline ‚Äî sync and uploads may fail.');
}
```

### Notes
- `getOnlineStatus()` reflects Pulsar‚Äôs offline/online state, while `getNetworkStatus()` reports the actual OS-level connection state.
- Use both together to determine whether an app is offline by design or due to connectivity issues.

---


## Method: `getPicklist()`

### `async getPicklist(objectName: string, fieldName: string, recordTypeId?: string, controllerFieldName?: string, controllerFieldValue?: string): Promise<{ itemIds: string[], itemLabels: string[] }>`
Retrieves filtered picklist values and labels for a specified field on a Salesforce object, based on the current layout configuration, selected Record Type, and (optionally) a value for the field‚Äôs controller.

This method only returns values visible and valid for the current record type and controlling field value. Use this when you want what the user would see in the actual UI.

### Parameters
| Parameter              | Type     | Required | Description                                                      |
| ---------------------- | -------- | -------- | ---------------------------------------------------------------- |
| `objectName`           | `string` | ‚úÖ        | The API name of the SObject (e.g., `"Account"`).                 |
| `fieldName`            | `string` | ‚úÖ        | The API name of the picklist field (e.g., `"Type"`).             |
| `recordTypeId`         | `string` | ‚ùå        | Optional Salesforce Record Type Id to scope the picklist values. |
| `controllerFieldName`  | `string` | ‚ùå        | API name of the controlling field (e.g., `"Industry"`).          |
| `controllerFieldValue` | `string` | ‚ùå        | Value of the controlling field (e.g., `"Retail"`).               |

> ‚ö†Ô∏è If specifying a controlling field, **both** `controllerFieldName` and `controllerFieldValue` must be provided.


### Returns
A `Promise<object>` that resolves to an object with the following fields:
| Field        | Type       | Description                            |
| ------------ | ---------- | -------------------------------------- |
| `itemIds`    | `string[]` | Array of valid picklist values         |
| `itemLabels` | `string[]` | Array of corresponding picklist labels |

---


## Method: `getUnfilteredPicklist()`

### `async getUnfilteredPicklist(objectName: string, fieldName: string, recordTypeId?: string): Promise<{ itemIds: string[], itemLabels: string[] }>`
Retrieves **all possible values and labels** for a picklist field on a Salesforce object, regardless of layout or controlling field constraints.
Use this when you need the full list of picklist options available in metadata, not just those visible based on layout configuration or selected Record Type.

This method is useful for administrative tools, form builders, or situations where layout visibility rules should be ignored.

### Parameters
| Parameter      | Type     | Required | Description                                                         |
| -------------- | -------- | -------- | ------------------------------------------------------------------- |
| `objectName`   | `string` | ‚úÖ        | The API name of the SObject (e.g., `"Account"`).                    |
| `fieldName`    | `string` | ‚úÖ        | The API name of the picklist field (e.g., `"Type"`).                |
| `recordTypeId` | `string` | ‚ùå        | Optional Salesforce Record Type Id to filter values by Record Type. |

### Returns
A `Promise<object>` that resolves to an object with the following fields:
``` ts
{
  itemIds: string[],     // The internal values of each picklist option
  itemLabels: string[]   // The user-facing labels for each option
}
```

---


## Method: `mail()`

### `async mail(to: string, subject: string, body: string, cc?: string, bcc?: string): Promise<object>`
Opens the native email client with the specified recipient, subject, and body. Optionally includes CC and BCC recipients. This method triggers Pulsar's `mail` bridge call, allowing pre-filled email composition from the Pulsar app.

### Parameters
| Parameter | Type     | Required | Description                                |
| --------- | -------- | -------- | ------------------------------------------ |
| `to`      | `string` | ‚úÖ       | Primary email address to send to           |
| `subject` | `string` | ‚úÖ       | Subject line of the email                  |
| `body`    | `string` | ‚úÖ       | Body text of the email (plain text only)   |
| `cc`      | `string` | ‚ùå       | Optional CC recipient(s), comma-separated  |
| `bcc`     | `string` | ‚ùå       | Optional BCC recipient(s), comma-separated |

### Returns
A `Promise<object>` ‚Äî resolves to a result object indicating success or error status from the platform.

### Example
``` js
await pulsar.init();

await pulsar.mail(
  'jane@example.com',
  'Site Visit Update',
  'Hi Jane,\n\nThe site visit is complete. See notes below...',
  'manager@example.com',
  'audit@example.com'
);
```

### Notes
- Opens the platform's default email composer with the fields pre-filled.
- Actual sending of the message is handled outside Pulsar ‚Äî this only opens the mail client.
- Subject and body should be kept plain-text. Rich formatting is not supported.
- Use this method to initiate user email actions from workflows, alerts, or field-level triggers.

---


## `DescribeSObjectResult` Reference
The result returned by `getSObjectSchema()` follows the [Salesforce DescribeSObjectResult structure](https://developer.salesforce.com/docs/atlas.en-us.api.meta/api/sforce_api_calls_describesobjects_describesobjectresult.htm), which provides metadata about a Salesforce SObject.

Below is a complete list of the fields available on the DescribeSObjectResult object:

| Property                 | Type                  | Description                                                      |
| ------------------------ | --------------------- | ---------------------------------------------------------------- |
| `actionOverrides`        | `ActionOverride[]`    | Custom page overrides for standard actions (e.g., View, Edit, New). |
| `activateable`           | `boolean`             | Reserved for future use.                                         |
| `associateEntityType`    | `string`              | Type of the parent association, if any (e.g., History).          |
| `associateParentEntity`  | `string`              | API name of the parent entity, if applicable.                    |
| `childRelationships`     | `ChildRelationship[]` | Foreign key relationships from child objects to this object.     |
| `compactLayoutable`      | `boolean`             | Indicates if the object supports `describeCompactLayouts()`.     |
| `createable`             | `boolean`             | Whether the object can be created.                               |
| `custom`                 | `boolean`             | Whether the object is custom (`true`) or standard (`false`).     |
| `customSetting`          | `boolean`             | Whether this object is a custom setting.                         |
| `dataTranslationEnabled` | `boolean`             | Indicates if data translation is enabled for the object.         |
| `deepCloneable`          | `boolean`             | Reserved for future use.                                         |
| `defaultImplementation`  | `string`              | Reserved for future use.                                         |
| `deletable`              | `boolean`             | Whether the object can be deleted.                               |
| `deprecatedAndHidden`    | `boolean`             | Reserved for future use.                                         |
| `extendedBy`             | `string`              | Reserved for future use.                                         |
| `extendsInterfaces`      | `string`              | Reserved for future use.                                         |
| `feedEnabled`            | `boolean`             | Whether Chatter feeds are enabled for the object.                |
| `fields`                 | `Field[]`             | Array of fields on the object. See below for field structure.    |
| `implementedBy`          | `string`              | Reserved for future use.                                         |
| `implementsInterfaces`   | `string`              | Reserved for future use.                                         |
| `isInterface`            | `boolean`             | Reserved for future use.                                         |
| `keyPrefix`              | `string`              | Three-character key prefix for IDs of this object type.          |
| `label`                  | `string`              | UI display label for the object.                                 |
| `labelPlural`            | `string`              | Plural label for the object.                                     |
| `layoutable`             | `boolean`             | Whether the object supports `describeLayout()`.                  |
| `mergeable`              | `boolean`             | Indicates if records of this object type can be merged.          |
| `mruEnabled`             | `boolean`             | Whether "Most Recently Used" tracking is enabled.                |
| `name`                   | `string`              | API name of the object.                                          |
| `namedLayoutInfos`       | `NamedLayoutInfo[]`   | List of available named layouts.                                 |
| `networkScopeFieldName`  | `string`              | Field used to scope the object in Experience Cloud.              |
| `queryable`              | `boolean`             | Whether the object can be queried.                               |
| `recordTypeInfos`        | `RecordTypeInfo[]`    | Array of record types for the object.                            |
| `replicateable`          | `boolean`             | Whether the object supports getUpdated/getDeleted replication.   |
| `retrieveable`           | `boolean`             | Whether the object can be retrieved with retrieve().             |
| `searchable`             | `boolean`             | Whether the object can be searched.                              |
| `searchLayoutable`       | `boolean`             | Whether search layouts can be described.                         |
| `supportedScopes`        | `ScopeInfo`           | Describes supported data scopes for filtering (e.g., My Accounts).|
| `triggerable`            | `boolean`             | Whether the object supports Apex triggers.                       |
| `undeletable`            | `boolean`             | Whether deleted records can be undeleted.                        |
| `updateable`             | `boolean`             | Whether the object can be updated.                               |
| `urlDetail`              | `string`              | URL to the object's detail view in the UI.                       |
| `urlEdit`                | `string`              | URL to the object's edit view in the UI.                         |
| `urlNew`                 | `string`              | URL to create a new record of this object.                       |

### `Field` Reference (`DescribeSObjectResult.fields[]`)

Each entry in the `fields` array includes detailed metadata:

| Property                   | Type          | Description                                                       |
| -------------------------- | ------------- | ----------------------------------------------------------------- |
| `autonumber`               | `boolean`     | True if the field is auto-generated.                              |
| `byteLength`               | `int`         | Max byte length of the field.                                     |
| `calculated`               | `boolean`     | True if the field is a formula.                                   |
| `caseSensitive`            | `boolean`     | True if values are case-sensitive.                                |
| `controllerName`           | `string`      | Controlling field name for dependent picklists.                   |
| `createable`               | `boolean`     | Whether the field can be created.                                 |
| `custom`                   | `boolean`     | Whether the field is custom.                                      |
| `dataTranslationEnabled`   | `boolean`     | Whether data translation is enabled.                              |
| `defaultedOnCreate`        | `boolean`     | Whether the field gets a default on create.                       |
| `defaultValueFormula`      | `string`      | Formula for the default value.                                    |
| `dependentPicklist`        | `boolean`     | Whether the field is a dependent picklist.                        |
| `deprecatedAndHidden`      | `boolean`     | Reserved for future use.                                          |
| `digits`                   | `int`         | Max number of digits for numeric fields.                          |
| `displayLocationInDecimal` | `boolean`     | Whether geolocation is shown in decimal format.                   |
| `encrypted`                | `boolean`     | Whether the field uses Shield Encryption.                         |
| `extraTypeInfo`            | `string`      | Metadata about text, URL, or reference subtypes.                  |
| `filterable`               | `boolean`     | Whether the field can be used in WHERE clauses.                   |
| `filteredLookupInfo`       | `FilteredLookupInfo` | Lookup filtering metadata, if applicable.                  |
| `formula`                  | `string`      | Formula used for calculated fields.                               |
| `groupable`                | `boolean`     | Whether the field can be used in GROUP BY.                        |
| `highScaleNumber`          | `boolean`     | Indicates support for 8-decimal precision.                        |
| `htmlFormatted`            | `boolean`     | Whether the field value is HTML formatted.                        |
| `idLookup`                 | `boolean`     | Whether the field can be used in upsert() calls.                  |
| `inlineHelpText`           | `string`      | Help text displayed for the field.                                |
| `label`                    | `string`      | Label for the field as shown in the UI.                           |
| `length`                   | `int`         | Max number of characters for string fields.                       |
| `name`                     | `string`      | API name of the field.                                            |
| `nameField`                | `boolean`     | Whether the field is the record's name field.                     |
| `namePointing`             | `boolean`     | Whether the field is a foreign key to a name field.               |
| `nillable`                 | `boolean`     | Whether the field is allowed to be null.                          |
| `permissionable`           | `boolean`     | Whether the field's access can be restricted via permissions.     |
| `picklistValues`           | `PicklistEntry[]` | Valid values for picklist fields.                             |
| `precision`                | `int`         | Total number of digits for decimal fields.                        |
| `referenceTo`              | `string[]`    | Target object(s) for lookup fields.                               |
| `relationshipName`         | `string`      | Name of the relationship used in SOQL.                            |
| `relationshipOrder`        | `int`         | Reserved for future use.                                          |
| `restrictedPicklist`       | `boolean`     | Whether picklist is restricted to defined values.                 |
| `scale`                    | `int`         | Number of digits after the decimal.                               |
| `soapType`                 | `string`      | SOAP type of the field (e.g., `xsd:string`).                      |
| `sortable`                 | `boolean`     | Whether the field can be used in ORDER BY clauses.                |
| `type`                     | `string`      | Data type of the field (e.g., `string`, `boolean`, `reference`).  |
| `unique`                   | `boolean`     | Whether the field must be unique.                                 |
| `updateable`               | `boolean`     | Whether the field can be updated.                                 |
| `writeRequiresMasterRead`  | `boolean`     | Whether writing to this field requires read access to the master object. |

## `ChildRelationship` Reference
Each describes a child SObject that references the current object:
| Property           | Type      | Description                                    |
| ------------------ | --------- | ---------------------------------------------- |
| `childSObject`     | `string`  | API name of the child object.                  |
| `field`            | `string`  | Name of the foreign key field in the child.    |
| `relationshipName` | `string`  | **SOQL** relationship name.                    |
| `cascadeDelete`    | `boolean` | Whether deleting the parent deletes the child. |



## `DescribeLayout` Reference
The `pulsar.getLayout(sObjectType)` method returns a `DescribeLayout` object which provides detailed metadata about the layout of a given Salesforce object (sObjectType). A DescribeLayout describes how fields, buttons, sections, and related lists are presented to users in both detail (read-only) and edit (editable) modes. Each layout is associated with a unique layout ID and may differ depending on the user's profile or record type.

The layout can include:
- Button sections for both standard and custom actions.
- Detail and edit layout sections, which define how fields are visually organized.
- Highlight panels, quick action buttons, and mobile cards (related content).
- Related lists for displaying child records.
- Save options that control behavior when users save a record (e.g., applying assignment rules).

### Fields on `DescribeLayout`
| Name | Type | Description |
|------|------|-------------|
| `buttonLayoutSection` | `DescribeLayoutButtonSection[]` | Standard and custom button sections. |
| `detailLayoutSections` | `DescribeLayoutSection[]` | Layout sections for the detail (read-only) view. |
| `editLayoutSections` | `DescribeLayoutSection[]` | Layout sections for the edit (editable) view. |
| `highlightsPanelLayoutSection` | `DescribeLayoutSection[]` | Layout sections for the highlights panel. |
| `multirowEditLayoutSections` | `DescribeLayoutSection[]` | Multiline layout sections (API 35.0+). |
| `id` | `ID` | Unique layout ID. |
| `quickActionList` | `DescribeQuickActionListResult` | List of actions (API 28.0+). |
| `relatedContent` | `RelatedContent` | Mobile cards section (API 29.0+). |
| `relatedLists` | `RelatedList[]` | Related lists associated with the layout. |
| `saveOptions` | `DescribeLayoutSaveOption[]` | Layout save options. |

## `RecordTypeMapping` Reference
Used to associate record types with layouts and picklist values.

### Fields on `RecordTypeMapping`
| Name | Type | Description |
|------|------|-------------|
| `available` | `boolean` | Whether the record type is available. |
| `defaultRecordTypeMapping` | `boolean` | Whether this is the default record type. |
| `layoutId` | `ID` | ID of associated layout. |
| `name` | `string` | Record type name. |
| `picklistsForRecordType` | `PicklistForRecordType[]` | Associated picklist values. |
| `recordTypeId` | `ID` | ID of the record type. |

## `RelatedList`
A RelatedList represents a list of child or related records associated with a parent sObjectType in a layout. For example, a Contact related list on an Account layout. It defines the metadata for how related data is presented, including columns, sort order, and available actions.

### Example
Assume that you want to get the related list fields and values for WorkOrderLineItems related to a WorkOrder.

``` js
const workOrder = await pulsar.read('WorkOrder', { Id: '001...' });
const workOrderLineItems = await pulsar.read('WorkOrderLineItem', { WorkOrderId: workOrder.Id });
const workOrderLayout = await pulsar.getLayout('WorkOrder');

const workOrderLineItemRelatedList = workOrderLayout.relatedList.find( rl => rl.sobjectName === 'WorkOrderLineItem');

const relatedListFieldLabels = workOrderLineItemRelatedList?.columns?.map( c => c.label);
const relatedListFieldSOQLFieldPaths = workOrderLineItemRelatedList?.columns?.map( c => c.apiFieldName);

const relatedListValues = await Promise.all(
  workOrderLineItems.map(async (woli) => {
    const values = await Promise.all(
      relatedListFieldSOQLFieldPaths.map(async (fieldPath) => {
        return await pulsar.resolveSOQLFieldPath(woli, fieldPath, 'WorkOrderLineItem');
      })
    );
    return values;
  })
);
```

### Fields on `RelatedList`
| Name | Type | Description |
|------|------|-------------|
| `buttons` | `DescribeLayoutButton[]` | Buttons available for this related list (standard/custom) (API 32.0+). |
| `columns` | `RelatedListColumn[]` | Fields/columns displayed in the list. Includes field name, label, type, and formatting info. |
| `custom` | `boolean` | Whether this is a custom related list. |
| `field` | `string` | The relationship field linking child to parent (e.g. `AccountId` on `Contact`). |
| `label` | `string` | UI label for the related list. |
| `limitRows` | `int` | Number of rows to display. |
| `name` | `string` | Developer name of the related list (matches ChildRelationship name). |
| `sobject` | `string` | API name of the child object shown in this list. |
| `sort` | `RelatedListSort[]` | Optional sort configuration (field + order). |

## `RelatedListColumn`
Defines an individual column displayed in a `RelatedList`. Each column corresponds to a field on the child object and includes label, format, and lookup configuration used for rendering and linking.

When using Pulsar to get the value for a column or field in a related list, we should use **always** use the fieldApiName and retrieve the value with `resolveSOQLFieldPath`. This ensures that we get the proper associated value.

### Fields on `RelatedListColumn`
| Name | Type | Description |
|------|------|-------------|
| `field` | `string` | API name of the field, usually in the format `Object.Field`. |
| `fieldApiName` | `string` | **SOQL-compatible field path**. May differ from field in format. This is the primary way to retrieve related list values. Make use of this with `resolveSOQLFieldPath`. |
| `format` | `string` | Optional format string (e.g., `date`, `dateTime`). |
| `label` | `string` | User-visible label for the column. |
| `lookupId` | `string` | SOQL path to the lookup ID field used to link to the detail view. |

## `PlatformFeature`
The list of platform features and their availability.

### Properties of `PlatformFeature`
| Property           | Type   | Description                                                 |
| ------------------ | ------ | ----------------------------------------------------------- |
| `featureName`      | `string` | The name of the feature.                                  |
| `isAvailable`      | `string` | `TRUE` if present, `FALSE` otherwise                      |
| `value`            | `string` | Optional string value for the feature                     |

## `PhotoFileMetadata`
The `PhotoFileMetadata` is returned by the `cameraPhoto` and `cameraPhotoPicker` methods.

### Properties of `PhotoFileMetadata`
| Property           | Type   | Description                                                 |
| ------------------ | ------ | ----------------------------------------------------------- |
| `ContentType`      | `string` | The MIME type of the file (e.g., `image/jpeg`).             |
| `FileName`         | `string` | The original file name (e.g., `IMG_001.jpg`).               |
| `FilePath`         | `string` | The absolute file path on the device.                       |
| `FileURL`          | `string` | A URL pointing to the file (if available).                  |
| `RelativeFilePath` | `string` | A path relative to the app‚Äôs root directory, if applicable. |


## Custom Developer Guidelines
- When calling `pulsar.listviewMetadata(...)`, the returned object is of type `ListviewLayout`, and the list of field API names is found in the `.fields` array. Do not reference `.columns` or `.displayColumns` in this context.
